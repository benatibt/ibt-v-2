/* **********************************************************************
   IBT THEME CSS
   Structural helpers for things that don’t fit in theme.json or templates
   ********************************************************************** */

/* ---------INDEX ----------
   1. Typography
   2. Buttons & Links - Common
   3. Header, Nav & Footer
   4. Layout / Spacing
   5. Utilities
   6. States & Media
   7. Dev Sandbox
   ------------------------ */


/* ======================================================================
   1. TYPOGRAPHY
   Heading levels, visited links
   ====================================================================== */

/* Headings (per-level until WP adds theme.json support) */
h1 {font-size: var(--wp--preset--font-size--xxxl); font-weight: 700 ; padding-top: var(--wp--preset--spacing--xl) ; padding-bottom: var(--wp--preset--spacing--s);}
h2 {font-size: var(--wp--preset--font-size--xxl); font-weight: 600 ; padding-top: var(--wp--preset--spacing--l) ;}
h3 {font-size: var(--wp--preset--font-size--xl); font-weight: 600 ; padding-top: var(--wp--preset--spacing--m) ;}
h4 {font-size: var(--wp--preset--font-size--l); font-weight: 600 ; padding-top: var(--wp--preset--spacing--m) ;}
h5 {font-size: var(--wp--preset--font-size--m); font-weight: 600 ; padding-top: var(--wp--preset--spacing--s) ;}
h6 {font-size: var(--wp--preset--font-size--m); font-weight: 450 ; padding-top: var(--wp--preset--spacing--s) ;}

/* Visited links in body text */
:where(p, li, .rich-text) a:visited {color: var(--wp--custom--color--color-text-emphasis-primary-visited);}


/* ======================================================================
   2. BUTTONS & LINKS
   Variants, hover/focus states, global link effects
   ======================================================================
   2.1 - Buttons
   2.2 - Links */

/* ------------------------- 2.1 - Buttons ------------------------------ */

/* Button variants (that can't be styled in json) */
.wp-block-button.is-style-buy-solid .wp-block-button__link {
  background-color: var(--wp--custom--color--color-secondary);
  color: #FFF;
  border: 2px solid var(--wp--custom--color--color-secondary);
}

.wp-block-button.is-style-buy-outline .wp-block-button__link {
  background-color: transparent;
  color: var(--wp--custom--color--color-secondary);
  border: 2px solid var(--wp--custom--color--color-secondary);
}

/* Shared button behaviour */
.wp-block-button__link {transition: transform 0.15s ease, background-color 0.15s ease, border-color 0.15s ease;}
.wp-block-button__link:hover {transform: translateY(-1px);}
.wp-block-button__link:focus-visible {outline: 2px solid var(--wp--custom--color--color-primary); outline-offset: 2px;}

/* Button hover states by variant */
.wp-block-button:not(.is-style-outline):not(.is-style-buy-solid):not(.is-style-buy-outline) .wp-block-button__link:hover {
  background-color: var(--wp--custom--color--color-primary-hover);
  border-color: var(--wp--custom--color--color-primary-hover);
}
.wp-block-button.is-style-outline .wp-block-button__link:hover {
  color: var(--wp--custom--color--color-primary-hover);
  border-color: var(--wp--custom--color--color-primary-hover);
}
.wp-block-button.is-style-buy-solid .wp-block-button__link:hover {
  background-color: var(--wp--custom--color--color-secondary-hover);
  border-color: var(--wp--custom--color--color-secondary-hover);
}
.wp-block-button.is-style-buy-outline .wp-block-button__link:hover {
  color: var(--wp--custom--color--color-secondary-hover);
  border-color: var(--wp--custom--color--color-secondary-hover);
}

/* ------------------------- 2.2 - Links ------------------------------ */
 
/* Link hover and focus-visible effects */
:where(a[href]):not(.wp-element-button):not(.wp-block-button__link):not(.ibt-header-nav a):hover,
.wp-block-navigation:not(.ibt-header-nav) a:hover {
  text-decoration: underline;
  color: var(--wp--custom--color--color-primary-hover);
  text-decoration-thickness: 2px;
  text-underline-offset: 0.25em;
}
:where(a[href]):not(.wp-element-button):not(.wp-block-button__link):not(.ibt-header-nav a):focus-visible,
.wp-block-navigation:not(.ibt-header-nav) a:focus-visible {
  outline: 2px solid var(--wp--custom--color--color-primary);
  outline-offset: 2px;
}


/* ======================================================================
   3. HEADER, NAV & FOOTER
   Sticky, navigation, utility icons, titles, search, footer
   ====================================================================== */

/* 3.1  Sticky header (with admin-bar offsets)
   3.2  Header navigation - Common [.ibt-header-nav]
   3.3  Header navigation - Desktop [.ibt-nav-desktop]
   3.4  Header navigation - Mobile [.ibt-nav-mobile]
   3.5  Navigation backgrounds
   3.6  Header utility icons (Search, Account, Cart)
   3.7  Header width & alignment
   3.8  Header site titles & nav defaults
   3.9  Header search button & input
   3.10 Footer */
   
/* ----------------------------------------------------------------------
   The IBT header contains *TWO SEPARATE* Navigation block instances to 
   allow breakpoint control and avoid limitations of WP’s overlay toggle.
   ----------------------------------------------------------------------*/


/* ---------- 3.1 Sticky header (with admin-bar offsets) ---------- */

:root { --ibt-adminbar-offset: 0px; } /* default, no admin bar */
.admin-bar { --ibt-adminbar-offset: 32px; } /* WP admin bar desktop */
@media (max-width: 782px) {
  .admin-bar { --ibt-adminbar-offset: 46px; } /* WP admin bar mobile */
}

/* Sticky header; uses :has() which older browsers ignore (falls back to normal header) */
.ibt-sticky,
.wp-block-template-part:has(> .ibt-sticky) {
  position: sticky;
  top: var(--ibt-adminbar-offset);
  z-index: 50; /* header above content */
}
.wp-block-template-part:has(> .ibt-sticky) { z-index: 49; } /* wrapper stays just below */


/* ---------- 3.2 Header navigation - COMMON ---------- */

/* Ensure all nav items (top-level + submenu) are vertically centered & AAA tap target */
.ibt-header-nav .wp-block-navigation-item__content {
  min-height: 48px;       /* AAA baseline */
  display: flex;
  align-items: center;
}

/* Transparent border avoids layout shift for hover/focus highlight */
.ibt-header-nav .wp-block-navigation-item__content {
  border: 2px solid transparent;
  border-radius: 6px;
  transition: border-color 0.2s ease, color 0.2s ease;
}

/* Apply hover & focus-visible effects to general nav content */
.ibt-header-nav .wp-block-navigation-item__content:hover,
.ibt-header-nav .wp-block-navigation-item__content:focus-visible {
  color: var(--wp--custom--color--color-primary-hover);
  border-color: var(--wp--custom--color--color-primary-hover);
}


/* ---------- 3.3 Header navigation - DESKTOP ONLY ---------- */

/* Spacing, sizing, centering & AAA tap target - top lvl & submenu. */
.ibt-nav-desktop .wp-block-navigation__container .wp-block-navigation-item__content,
.ibt-nav-desktop .wp-block-navigation__submenu-container .wp-block-navigation-item__content {
  padding-top: 0;
  padding-bottom: 0;
  min-height: 48px; /* AAA baseline */
  line-height: 1.2;
  display: flex;
  align-items: center;
}

/* Equal horizontal padding for all clickable elements. */
.ibt-nav-desktop :is(
  a.wp-block-navigation-item__content,
  button.wp-block-navigation-item__content,
  button.wp-block-navigation-submenu__toggle,
  button.wp-block-navigation-item__content.wp-block-navigation-submenu__toggle
) { padding-left: 0.5rem; padding-right: 0.5rem; }


/* ---------- 3.4 Header navigation - MOBILE ONLY ---------- */

/* Collapse all submenus on mobile menu by default */
.ibt-nav-mobile .wp-block-navigation__responsive-container.is-menu-open
  .wp-block-navigation__submenu-container { display: none; }

/* Reveal submenu when WordPress marks it as open. Robust selection as this is critical */
.ibt-nav-mobile .wp-block-navigation__submenu-container.is-open,
.ibt-nav-mobile .wp-block-navigation-submenu__toggle[aria-expanded="true"]
  + .wp-block-navigation__submenu-container,
.ibt-nav-mobile .wp-block-navigation-submenu__toggle[aria-expanded="true"]
  ~ .wp-block-navigation__submenu-container { display: block; }

/* Add padding inside the mobile overlay (drawer) when open. */
.ibt-nav-mobile :is(.wp-block-navigation__responsive-container,
                    .wp-block-navigation__responsive-dialog).is-menu-open
  .wp-block-navigation__responsive-container-content { padding: 1.5rem; }

/* Add padding to mobile elements. !importan req'd and it's limited to .ibt-nav-mobile */
.ibt-nav-mobile a.wp-block-navigation-item__content,
.ibt-nav-mobile button.wp-block-navigation-submenu__toggle {
  padding-left: 1rem !important;
  padding-right: 1rem !important;
}

/* AAA compliant tap target (open + close) */
.ibt-nav-mobile :is(
  .wp-block-navigation__responsive-container-open,
  .wp-block-navigation__responsive-container-close
) {
  min-width: 49px;
  min-height: 49px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 2px solid transparent;
  border-radius: 6px;
  color: var(--wp--preset--color--emphasis-primary);
  cursor: pointer;
  transition: color 0.2s ease, border-color 0.2s ease;
}

/* Hover and focus-visible states */
.ibt-nav-mobile :is(
  .wp-block-navigation__responsive-container-open,
  .wp-block-navigation__responsive-container-close
):hover,
.ibt-nav-mobile :is(
  .wp-block-navigation__responsive-container-open,
  .wp-block-navigation__responsive-container-close
):focus-visible {
  color: var(--wp--custom--color--color-primary-hover);
  border-color: currentColor;
}


/* ---------- 3.5 Navigation backgrounds ---------- */

/* Submenus and mobile overlay get consistent header background */
.wp-block-navigation__submenu-container {
  background-color: var(--wp--custom--color--color-header-bg) !important;
}
.wp-block-navigation__responsive-container,
.wp-block-navigation__responsive-dialog {
  background-color: var(--wp--custom--color--color-header-bg) !important;
}


/* ---------- 3.6 Header utility icons (Search, Account, Cart) ---------- */

/* Icon wrapper ensures 44×44px size + border for WCAG tap target */
.ibt-header-wooicons {
  width: 44px;
  height: 44px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--wp--preset--color--emphasis-primary);
  border: 2px solid transparent; /* placeholder border prevents shift */
  border-radius: 6px;
  transition: color 0.2s ease, border-color 0.2s ease;
  cursor: pointer;
  min-width: 49px;   /* ensure consistent tap target */
  min-height: 49px;  /* merged from .ibt-icons > * */
}

/* Reset link/button inside wrapper so it inherits wrapper style */
.ibt-header-wooicons > a,
.ibt-header-wooicons > button {
  all: unset;
  width: 100%;
  height: 100%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: inherit;
  border-radius: inherit;
  cursor: pointer;
}

.ibt-header-wooicons svg {
  width: 24px;
  height: 24px;
  display: block;
  pointer-events: none; /* icon shouldn’t capture events */
}

/* Hover/focus changes icon color and border */
.ibt-header-wooicons:hover,
.ibt-header-wooicons:focus-within {
  color: var(--wp--custom--color--color-primary-hover);
  border-color: var(--wp--custom--color--color-primary-hover);
}


/* ---------- 3.7 Header width & alignment ---------- */

/* Centers header, constrains to wide size, adds root padding */
.ibt-header-inner {
  box-sizing: border-box;
  width: 100%;
  max-width: var(--wp--style--global--wide-size);
  margin-inline: auto;
  padding-left: var(--wp--style--root--padding-left);
  padding-right: var(--wp--style--root--padding-right);
}


/* ---------- 3.8 Header site titles & nav defaults ---------- */

/* Desktop defaults: show desktop title/nav, hide mobile versions */
.ibt-title--desktop {
  display: block;
  line-height: 49px; /* matches icon height */
  height: 49px;
}
.ibt-title--mobile  { display: none; }
.ibt-nav-dual .ibt-nav-desktop { display: block; }
.ibt-nav-dual .ibt-nav-mobile  { display: none; }

/* Default Row 2: flex-end because mobile title hidden */
.ibt-row2.is-layout-flex { justify-content: flex-end; }

/* Force desktop nav to stay horizontal */
.ibt-nav-dual .ibt-nav-desktop .wp-block-navigation__container {
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  align-items: center;
}


/* ---------- 3.9 Header search button & input ----------  */

/* Search field hidden by default */
.ibt-search-field { display: none; }

/* Wrapper keeps button snug without extra spacing */
.ibt-search-button-wrapper {
  margin: 0;
  padding: 0;
  width: auto;
  display: inline-flex;
}

/* Toggle button styled as icon only */
.ibt-search-toggle {
  background: none;
  border: none;
  padding: 0;
  margin: 0;
  width: 49px;
  height: 49px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* When open, show search field at fixed width/height */
.ibt-search--open .ibt-search-field {
  display: grid;
  align-items: center;
  height: var(--wp--custom--search--height);
  width: 280px;
}

/* Input box styling */
.ibt-search--open .ibt-search-field input[type="search"] {
  width: 100%;
  min-width: 0;
  box-sizing: border-box;
  padding: var(--wp--custom--search--padding--top)
           var(--wp--custom--search--padding--right)
           var(--wp--custom--search--padding--bottom)
           var(--wp--custom--search--padding--left);
  border: 2px solid var(--wp--custom--color--color-header-border);
  border-radius: var(--wp--custom--search--border--radius);
  background: #fff;
  font-size: var(--wp--preset--font-size--s);
  line-height: 1.4;
}

/* Focus state — rely on border, so suppress outline */
.ibt-search--open .ibt-search-field input[type="search"]:focus-visible {
  outline: none;
}


/* ---------- 3.10 Footer (reserved) ---------- */

/* Placeholder for footer css */


/* ======================================================================
   4. LAYOUT / SPACING
   Root padding overrides, group/wide constraints
   ====================================================================== */

/* Strip default WP global padding from all Group blocks, except root-level and
   those marked with .ibt-outer-wrap. Prevents double-padding inside nested groups. */
:root :where(.wp-block-group):not(.has-global-padding):not(.ibt-outer-wrap) {padding-left: 0; padding-right: 0;}



/* ======================================================================
   5. UTILITIES
   SR-only, status colours, notices, dev/test helpers
   ====================================================================== */

/* Prevent media (img/video/iframe/etc) overflowing */
img, video, iframe, embed, object { max-width: 100%; height: auto; display: block;}

/* Anchor scroll offset to prevent in-page targets hiding behind sticky header */
h1[id], h2[id], h3[id], h4[id], h5[id], h6[id] {scroll-margin-top: 102px;}

/* Screen-reader only text */
.screen-reader-text {
  position: absolute !important;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip-path: inset(50%);
  white-space: nowrap;
  border: 0;
}

/* Editor-only: force all nav/title variants visible in Site Editor
   (keeps blocks selectable while editing) */
.editor-styles-wrapper .ibt-title--desktop,
.editor-styles-wrapper .ibt-title--mobile,
.editor-styles-wrapper .ibt-nav-dual .ibt-nav-desktop,
.editor-styles-wrapper .ibt-nav-dual .ibt-nav-mobile {
  display: block !important;
}



/* ======================================================================
   6. STATES & MEDIA
   Breakpoints, reduced motion, print
   ====================================================================== */

/* ---------------------- 6.1 Header layout breakpoints ---------------- */

/* ---- Default is narrow desktop / wide tablet ---- */

/* ---- Narrow screens ---- */
@media (max-width: 799px) {
  /* -- Header adaptation for narrow viewport -- */
  .ibt-title--desktop { display: none; }   /* Swap site titles */
  .ibt-title--mobile  { display: block; }
  .ibt-nav-dual.is-layout-flex { justify-content: flex-end; }  /* Row group right, default is space between */
  .ibt-nav-dual .ibt-nav-desktop { display: none; } /* Swap navs */
  .ibt-nav-dual .ibt-nav-mobile  { display: block; }
  .ibt-row1.is-layout-flex { justify-content: flex-end; }   /* Row 1: desktop title hidden */
  .ibt-row2.is-layout-flex { justify-content: space-between; } /* Row 2: mobile title visible */
  .ibt-header-inner > .wp-block-column:first-child { flex-basis: 70px; max-width: 70px; }  /* Reduce logo column width */
}

/* ---- Large width ---- */
@media (min-width: 1000px) {
  /* Larger font size for header navigation items */
  .ibt-header .ibt-nav-dual .ibt-nav-desktop .wp-block-navigation__container { font-size: var(--wp--preset--font-size--l); }
  /* Increase block gap between nav items */
  .ibt-header .ibt-nav-dual .ibt-nav-desktop { gap: var(--wp--preset--spacing--xs); }
}

/* ---- Short viewport height ---- */
@media (max-height: 600px) {
  /* Disable sticky header entirely */
  .ibt-sticky, .wp-block-template-part:has(> .ibt-sticky) { position: static !important; top: auto !important;  }
}


/* ---------------------- 6.2 Header search breakpoints ---------------- */

/* ---- Default is wide screen - Defined in section 3.5 --- */

/* ---- Medium screens (hide desktop site title when search is open) ---- */
@media (max-width: 1000px) and (min-width: 780px) {
  .ibt-search--open .ibt-title--desktop { display: none; }
  .ibt-search--open .ibt-row1.is-layout-flex { justify-content: flex-end; }
}

/* ---- Narrow screens (shrink search input) ---- */
@media (max-width: 600px) {
  .ibt-search--open .ibt-search-field { width: 140px; }
}

/* ---- Very narrow screens (hide account + cart to make room) ---- */
@media (max-width: 410px) {
  .ibt-search--open .ibt-icons [data-block-name="woocommerce/customer-account"],
  .ibt-search--open .ibt-icons [data-block-name="woocommerce/mini-cart"] {
    display: none;
  }
}


/* ---------------------- 6.3 Print Safeguards ------------------ */

/* --- Prevent print layout issues (sticky header, double nav) --- */
@media print {
  /* Show desktop navigation and hide mobile navigation */
  .ibt-nav-dual .ibt-nav-desktop { display: block !important; }
  .ibt-nav-dual .ibt-nav-mobile  { display: none !important; }

  /* Disable sticky positioning for header and its template wrapper */
  .ibt-sticky,
  .wp-block-template-part:has(> .ibt-sticky) {
    position: static !important;
    top: auto !important;
  }
}

/* ---------------------- 6.4 Reduced Motion ------------------ */

/* --- Implement user reduced-motion preference (WCAG compliance) --- */
@media (prefers-reduced-motion: reduce) {
  /* Disable smooth scrolling if set anywhere */
  :root, html:focus-within { scroll-behavior: auto !important; }
  /* Disable animations/transitions across the UI */
  *, *::before, *::after {
      animation: none !important;
      transition: none !important;
  }
}


/* ======================================================================
   7. DEV & TEST
   Sandbox. To be moved when complete.
   ====================================================================== */

   


/* **********************************************************************
   END IBT THEME CSS
   ********************************************************************** */