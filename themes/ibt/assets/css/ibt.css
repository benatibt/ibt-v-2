/* **********************************************************************
   IBT THEME CSS
   Structural helpers for things that don’t fit in theme.json or templates
   ********************************************************************** */

/* ---------INDEX ----------
   0. Theme documentation
   1. Typography & Base styles
   2. Buttons & Links - Common
   3. Header, Nav & Footer
   4. Layout / Spacing
   5. Utilities
   6. States & Media
   7. Dev Sandbox
   ------------------------ */

/* =====================================================================
             0 - Theme documentation and conventions
  =====================================================================
  
  Purpose:
  Keep all theme-level CSS predictable, token-driven, and accessible.
  Document design here in just enough detail for future maintenance
  without the overhead of separate documents. 

--------- 0.0 - CSS ADOPTION POLICY -------- 
Given IBT's older demographic site must operate for out of date browsers
but we do not want to limit styling for the majority of our audience. The
following pragmatic guidelines on UK CSS feature support apply as a guide.

Critical core: ≥ 99.8 % browser coverage.
  Site must fully function even with no advanced CSS.
  Avoid new syntax on a11y and basic site use features.

Nice-to-have layer: ≥ 95 % UK coverage. (e.g. :has(), :where() ) 
  Should degrade gracefully without support. 

Experimental (< 95 %) UK coverage: Not permitted.

   
--------- 0.1 - TOKEN & NAMING SYSTEM --------
   
WordPress tokens
  --wp--* ........................ Core WP presets
  .editor-styles-wrapper ......... Set formats specifically for site editor.

IBT custom tokens
  --color-* ...................... Semantic colour tokens (palette-agnostic)
  --ibt-adminbar-offset .......... Offset for WP admin bar
  --wp--custom--color--* ......... Private palette (as -color but not exposed to editor)
  --spacing-* .................... Spacing scale (rem-based or clamp)
  --transition-* ................. Motion timing (base, fast, slow) for easy tuning

--------- 0.2 - CLASS NAMING -----------

ROOT PADDING
  .ibt-rootp-apply ................ Add to outer groups to apply root padding.
  .ibt-rootp-bg-exempt ............ Background is not constrained with content box
HEADER
  .ibt-header ..................... Main header wrapper element.
  .ibt-header-icons ............... Wrapper for all header icon buttons.
  .ibt-header-inner ............... Constrains header inner width and applies root padding.
  .ibt-header-nav ................. Common styling for all navigation instances.
  .ibt-header-nav-desktop ......... Desktop navigation instance.
  .ibt-header-nav-dual ............ Wrapper combining both desktop and mobile nav blocks for breakpoint toggling.
  .ibt-header-nav-mobile .......... Mobile navigation instance.
  .ibt-header-row1 ................ First header row (utility row).
  .ibt-header-row2 ................ Second header row (navigation row).
  .ibt-header-search-button-wrap .. Search button wrapper (for consistent sizing with Woo icons).
  .ibt-header-search-field ........ Container for the search input.
  .ibt-header-search-toggle ....... Icon-only button that toggles search visibility.
  .ibt-header-search.is-open ...... State class applied to header when search field is active/open.
  .ibt-header-sticky .............. Makes the header sticky beneath the WP admin bar.
  .ibt-header-title-desktop ....... Row 1 site title — visible on desktop.
  .ibt-header-title-mobile ........ Row 2 site title — visible on mobile.
  .ibt-header-wooicons ............ Wrapper for WooCommerce header icons.

PREFOOTER
  .ibt-prefooter-card ............. Inline-block wrapper for pre-footer call-to-action card.
  .ibt-prefooter-inner ............ Centers pre-footer inner group content horizontally.

------------- 0.3 - STYLE PRINCIPLES ----------------------

• Header/footer constrained to 80 rem inner width (review later)
• Root padding uses clamp().
• Colour-agnostic design: only #000 / #fff should appear literal.
• All motion ease times use transition tokens.
• Tokens are mostly set in theme.json, reasons for exceptions in comments. This includes
  custom tokens --wp--custom--*
• :has() used for styling elements but not for critical functionality. (Support for v. old browsers.)  
• Typography and spacing use tokens or clamp() at larger sizes for responsive fluid scaling.
• Accessibility: AAA general target but safe AA acceptable if really needed.
• Basic keyboard nav tests during dev, full a11y checks before release


------------ 0.4 - COMMENT CONVENTION -------------------------

Each section comment should include:
  WHY – design intent for all sections / blocks (always)
  WHAT IT DOES – plain English for complex syntax (when needed)
  HOW TO MAINTAIN – notes for future (when needed)

Example: (+ == *)
  /+ Scale nav text to suit container width. 1cqw = 1% of nav container width.
    Note - Adjust slope if wrapping occurs in header desktop nav .+/
  font-size: clamp(1rem, 1cqw + 0.9rem, 1.25rem);


/* ======================================================================
   1. TYPOGRAPHY & BASE STYLES
   Basic styling that doesn't work in json yet
   ====================================================================== */

/* Define variables for use in all transitions. Not in theme.json because
   it doesn't support transitions yet. */
:root {
  --transition-base: 0.2s ease-in-out; /* Default */
  --transition-fast: 0.15s ease-out;   /* hover & micro-lift effects */
  --transition-slow: 0.3s ease;        /* larger fades / layout shifts */
}

/* Headings (per-level until WP adds theme.json support) */
h1 {font-size: var(--wp--preset--font-size--xxxl); font-weight: 700 ; padding-top: var(--wp--preset--spacing--xl) ; padding-bottom: var(--wp--preset--spacing--s);}
h2 {font-size: var(--wp--preset--font-size--xxl); font-weight: 600 ; padding-top: var(--wp--preset--spacing--l) ;}
h3 {font-size: var(--wp--preset--font-size--xl); font-weight: 600 ; padding-top: var(--wp--preset--spacing--m) ;}
h4 {font-size: var(--wp--preset--font-size--l); font-weight: 600 ; padding-top: var(--wp--preset--spacing--m) ;}
h5 {font-size: var(--wp--preset--font-size--m); font-weight: 600 ; padding-top: var(--wp--preset--spacing--s) ;}
h6 {font-size: var(--wp--preset--font-size--m); font-weight: 500 ; padding-top: var(--wp--preset--spacing--s) ;}

/* Provide theme style for <hr>, partially supported in json but doing all in one place is cleaner. */
hr,
.wp-block-separator {
  border: none;
  border-top: 1px solid var(--wp--custom--color--border-primary);
  margin-block: var(--wp--preset--spacing--m);
}

/* Provide basic neutral grey separator */
/* Can be set in theme.json but over-written because Gutenberg... */
.wp-block-separator,
.wp-block-separator.has-alpha-channel-opacity {
  border-top: 1px solid #d9d9d9;
  opacity: 1;
}


/* ======================================================================
   2. BUTTONS & LINKS
   Variants, hover/focus states, global link effects
   ======================================================================
   2.1 - Links
   2.2 - Buttons */

/* ------------------------- 2.1 - Links ------------------------------ */

/* Create an absolute position for all a (link) elements for visual effects */
a {
  position: relative;  
}

/* ----- Default text link -----
   Universal link styling. Excludes buttons, nav items, and heading links.
   Low specificity for overides as needed. */

/* Base state (low specificity via :where) */
:where(a[href]):not(:where(.wp-element-button, .wp-block-button__link, .button)):not(:where(nav *)) {
     text-decoration: underline ;
  transition:
    text-underline-offset var(--transition-slow),
    text-decoration-thickness var(--transition-slow);
}

/* Hover */
:where(a[href]):not(:where(.wp-element-button, .wp-block-button__link, .button)):not(:where(nav *)):hover {
  text-underline-offset: 0.2em;
  transition:
    text-underline-offset var(--transition-slow),
    text-decoration-thickness var(--transition-slow);
}

/* Visited */
:where(a[href]):not(:where(.wp-element-button, .wp-block-button__link, .button)):not(:where(nav *)):visited {
  color: inherit;
}


/* Heading links – lighter underline for posts and pages
   Note – excludes WooCommerce and Footer contexts,
   which are styled in their respective sections. 
   DEV - WOULD BENEFIT FROM ANOTHER PASS TO TRY TO ELIMNATE IMPORTANT but it works */
:where(.wp-block-post-title a):not(:where(.woocommerce *)):not(:where(.ibt-footer *)) {
  color: inherit;
  text-decoration: underline !important;     /* maintain specificity vs block defaults */
  text-decoration-thickness: 1px !important; /* maintain specificity vs block defaults */
  text-underline-offset: 0.15em;
  transition:
    text-underline-offset var(--transition-base),
    text-decoration-thickness var(--transition-base);
}

/* Post Title Link - Hover */
.wp-block-post-title a:hover {
  text-underline-offset: 0.25em;
  text-decoration-thickness: 2px !important; /* maintain specificity vs block defaults */
  transition:
    text-underline-offset var(--transition-base),
    text-decoration-thickness var(--transition-base);
}


/* ----- Image links ----- */

/* Prepare linked images for hover effects */
a > img {
  display: block;       /* Remove inline spacing; ensures predictable box behaviour */
  transition:           /* Animate only transform and filter (no opacity here) */
    transform var(--transition-fast),
    filter    var(--transition-fast);
}

/* Hover: gentle zoom and brightening */
a:hover img {
  transform: scale(1.003);    /* Slight zoom-in for tactile feel */
  filter: brightness(1.05);   /* Lift luminance slightly, no colour shift */
}

/* Edge-light overlay setup */
a:has(img)::after {
  content: "";                 /* Generate empty pseudo-element layer */
  position: absolute;          /* Position it relative to the link */
  inset: 0;                    /* Fill the entire link box */
  pointer-events: none;        /* Keep clicks/focus on the image/link itself */
  opacity: 0;                  /* Start invisible (fades in on hover) */
  transition: opacity var(--transition-base);  /* Fade speed for the overlay */
  background: radial-gradient( /* Create a soft radial light around edges */
    circle at center,
    rgba(255,255,255,0)   50%,  /* Transparent centre */
    rgba(255,255,255,0.22) 95%  /* Gentle edge highlight */
  );
  mix-blend-mode: screen;      /* Lighten only; preserve underlying detail */
}

/* Hover: reveal the overlay */
a:has(img):hover::after {
  opacity: 1;
}


/* ------ ICON BUTTONS ------ */
/* Add .ibt-icon-button class to buttons to use this hover rule */

.ibt-icon-button {
  display: inline-flex;                 /* Centre icon within box */
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: transform var(--transition-base);
}

/* Subtle scale-up on hover */
.ibt-icon-button:hover svg,
.ibt-icon-button:hover img {
  transform: scale(1.18);
}

/* Slight compress on press */
.ibt-icon-button:active svg,
.ibt-icon-button:active img {
  transform: scale(0.98);
}

/* ------------------------- 2.2 - Buttons ------------------------------ */

/* Core + WooCommerce buttons share base geometry */
.wp-element-button,
.wc-block-components-button,
.wc-block-components-product-button__button,
.single_add_to_cart_button,
.wc-block-cart__submit-button,
.wc-block-components-checkout-place-order-button {
  font-family: var(--wp--preset--font-family--title-font);
  font-weight: 600;
  border-radius: 8px;
  border-width: 2px;
  border-style: solid;
  min-height: 50px;
  padding: 0.75rem 1.25rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition:
    color var(--transition-base),
    background-color var(--transition-base),
    border-color var(--transition-base),
    box-shadow var(--transition-base),
    transform var(--transition-fast);
}

/* Hover micro-lift for all core + Woo buttons */
.wp-element-button:hover,
.wc-block-components-button:hover,
.wc-block-components-product-button__button:hover,
.single_add_to_cart_button:hover,
.wc-block-cart__submit-button:hover,
.wc-block-components-checkout-place-order-button:hover {
  transform: translateY(-1px);
}

/* Base elevation for all core + Woo buttons */
.wp-element-button,
.wc-block-components-button,
.wc-block-components-product-button__button,
.single_add_to_cart_button,
.wc-block-cart__submit-button,
.wc-block-components-checkout-place-order-button {
  box-shadow: var(--wp--preset--shadow--low);
}

/* Hover elevation for all core + Woo buttons */
.wp-element-button:hover,
.wc-block-components-button:hover,
.wc-block-components-product-button__button:hover,
.single_add_to_cart_button:hover,
.wc-block-cart__submit-button:hover,
.wc-block-components-checkout-place-order-button:hover {
  box-shadow: var(--wp--preset--shadow--medium);
  transform: translateY(-1px);
}

/* Pressed state for all core + Woo buttons */
.wp-element-button:active,
.wc-block-components-button:active,
.wc-block-components-product-button__button:active,
.single_add_to_cart_button:active,
.wc-block-cart__submit-button:active,
.wc-block-components-checkout-place-order-button:active {
  box-shadow: var(--wp--preset--shadow--sunken);
  transform: translateY(0);
}

/* Disabled state for all core + Woo buttons */
.wp-element-button:disabled,
.wp-element-button[aria-disabled="true"],
.wc-block-components-button:disabled,
.wc-block-components-product-button__button:disabled,
.single_add_to_cart_button:disabled,
.wc-block-cart__submit-button:disabled,
.wc-block-components-checkout-place-order-button:disabled {
  box-shadow: none;
  transform: none;
  cursor: not-allowed;
  pointer-events: none;
}

/* ----- Base Colours ----- */

/* Primary Solid */
.wp-block-button.is-style-primary-solid .wp-element-button {
  background-color: var(--wp--custom--color--color-primary);
  color: #fff;
  border: 2px solid color-mix(in srgb, var(--wp--custom--color--color-primary) 85%, black 15%);
}

/* Primary Outline */
.wp-block-button.is-style-primary-outline .wp-element-button {
  background-color: color-mix(in srgb, white 50%, transparent);
  color: var(--wp--custom--color--color-primary);
  border: 2px solid var(--wp--custom--color--color-primary);
}

/* Buy Solid - includes primary Woo 10.3 buttons */
.wp-block-button.is-style-buy-solid .wp-element-button,
.single_add_to_cart_button,
.wc-block-cart__submit-button,
.wc-block-components-checkout-place-order-button,
.wc-block-components-product-button__button,
.wc-block-components-button.contained,
.wc-block-mini-cart__footer-checkout {
  background-color: var(--wp--custom--color--color-secondary);
  color: #fff;
  border: 2px solid color-mix(in srgb, var(--wp--custom--color--color-secondary) 85%, black 15%);
}

/* Buy Outline - includes Woo 10.3 secondary buttons */
.wp-block-button.is-style-buy-outline .wp-element-button,
.wc-block-components-button.outlined,
.wc-block-mini-cart__footer-cart,
.wc-block-cart__submit-button--secondary {
  background-color: color-mix(in srgb, white 50%, transparent);
  color: var(--wp--custom--color--color-secondary);
  border: 2px solid var(--wp--custom--color--color-secondary);
}

/* ----- Hover + Active ----- */

/* Primary Solid */
.wp-block-button.is-style-primary-solid .wp-element-button:hover {
  background-color: var(--wp--custom--color--color-primary-hover);
  border-color: color-mix(in srgb, var(--wp--custom--color--color-primary-hover) 70%, black 30%);
}
.wp-block-button.is-style-primary-solid .wp-element-button:active {
  background-color: color-mix(in srgb, var(--wp--custom--color--color-primary-hover) 90%, black 10%);
  border-color: color-mix(in srgb, var(--wp--custom--color--color-primary-hover) 70%, black 35%);
}

/* Primary Outline - includes Woo 10.3 secondary buttons */
.wp-block-button.is-style-buy-outline .wp-element-button:hover,
.wc-block-components-button.outlined:hover,
.wc-block-mini-cart__footer-cart:hover,
.wc-block-cart__submit-button--secondary:hover {
  background-color: color-mix(in srgb, white 88%, transparent);
  border-color: var(--wp--custom--color--color-primary-hover);
  color: var(--wp--custom--color--color-primary-hover);
}
.wp-block-button.is-style-buy-outline .wp-element-button:active,
.wc-block-components-button.outlined:active,
.wc-block-mini-cart__footer-cart:active,
.wc-block-cart__submit-button--secondary:active {
  background-color: color-mix(in srgb, white 80%, transparent);
  border-color: color-mix(in srgb, var(--wp--custom--color--color-primary-hover) 80%, black 20%);
}

/* Buy Solid - inlcudes Woo 10.3 primary buttons */
.wp-block-button.is-style-buy-solid .wp-element-button:hover,
.single_add_to_cart_button:hover,
.wc-block-cart__submit-button:hover,
.wc-block-components-checkout-place-order-button:hover,
.wc-block-components-product-button__button:hover,
.wc-block-components-button.contained:hover,
.wc-block-mini-cart__footer-checkout:hover {
  background-color: var(--wp--custom--color--color-secondary-hover);
  border-color: color-mix(in srgb, var(--wp--custom--color--color-secondary-hover) 70%, black 30%);
}
.wp-block-button.is-style-buy-solid .wp-element-button:active,
.single_add_to_cart_button:active,
.wc-block-cart__submit-button:active,
.wc-block-components-checkout-place-order-button:active,
.wc-block-components-product-button__button:active,
.wc-block-components-button.contained:active,
.wc-block-mini-cart__footer-checkout:active {
  background-color: color-mix(in srgb, var(--wp--custom--color--color-secondary-hover) 90%, black 10%);
  border-color: color-mix(in srgb, var(--wp--custom--color--color-secondary-hover) 70%, black 35%);
}

/* Buy Outline */
.wp-block-button.is-style-buy-outline .wp-element-button:hover {
  background-color: color-mix(in srgb, white 88%, transparent);
  border-color: var(--wp--custom--color--color-secondary-hover);
  color: var(--wp--custom--color--color-secondary-hover);
}
.wp-block-button.is-style-buy-outline .wp-element-button:active {
  background-color: color-mix(in srgb, white 80%, transparent);
  border-color: color-mix(in srgb, var(--wp--custom--color--color-secondary-hover) 80%, black 20%);
}

/* ----- Disabled States ----- */

/* Applies to all variants, including simulated (aria-disabled) */
.wp-element-button:disabled,
.wp-element-button[aria-disabled="true"] {
  opacity: 0.6;
  box-shadow: none;
  cursor: not-allowed;
  pointer-events: none;
  transform: none;
}

/* --------- 2.3 Focus Visible default -------- */

/* Warm red. Unique and good contrast on Paper and dark surfaces */
:focus-visible {
  outline: 2px solid #275A3D; 
  outline-offset: 2px;
}

/* Suppress duplicate outlines on elements that already have visible rings */
button:focus-visible,
[role="button"]:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
  outline-offset: 3px; /* small buffer from native borders */
}

/* ======================================================================
   3. HEADER, NAV & FOOTER
   Sticky, navigation, utility icons,  search, footer
   ====================================================================== */

/* ----------------------------------------------------------------------
   The IBT header contains *TWO SEPARATE* Navigation block instances to 
   allow breakpoint control and avoid limitations of WP’s overlay toggle.
   ----------------------------------------------------------------------*/

/* ----------------------------------------------------------------------
   3.1 – Sticky Header
   ---------------------------------------------------------------------- */
/* Keep header stuck to top with admin-bar offset for logged-in users.
   Note – Adjust --ibt-adminbar-offset if WordPress changes bar height. */

:root { --ibt-adminbar-offset: 0px; }
.admin-bar { --ibt-adminbar-offset: 32px; }

@media (max-width: 782px) {
  .admin-bar { --ibt-adminbar-offset: 46px; }
}

.ibt-header-sticky,
.wp-block-template-part:has(> .ibt-header-sticky) {
  position: sticky;
  top: var(--ibt-adminbar-offset);
  z-index: 50;
}

.wp-block-template-part:has(> .ibt-header-sticky) { z-index: 49; }

/* ---- Responsive: short viewport height ----
   Disable sticky header on small viewports to prevent content loss. */
@media (max-height: 600px) {
  .ibt-header-sticky,
  .wp-block-template-part:has(> .ibt-header-sticky) {
    position: static !important;
    top: auto !important;
  }
}


/* ----------------------------------------------------------------------
   3.2 – Header Styling
   ---------------------------------------------------------------------- */

/* ----- 3.2.A - Base container -----
   Handles header background, border, and general layout. */

/* Provide base styling and layout for the header container. */
.ibt-header {
  background-color: var(--wp--custom--color--color-header-bg);
  color: var(--wp--preset--color--emphasis-primary);
  border: none;
}

/* Center header content and constrain width to wide container. */
.ibt-header-inner {
  box-sizing: border-box;
  width: 100%;
  max-width: var(--wp--style--global--wide-size);
  margin-inline: auto;
  padding-block: 0;
}


/* ----- 3.2.B - Logo and column layout -----
   Manage logo column width, alignment and spacing. */

/* Fix logo column width (inline style override from block editor). */
.ibt-header-inner > .wp-block-column:first-child {
  flex-basis: 160px !important;  /*TEST was 85*/
  max-width: 160px;
}

/* ----- 3.2.C - Utility icons ----- */
/* Style search, account and cart icons as consistent 44×44 px tap targets. */

.ibt-header-wooicons {
  width: 44px;
  height: 44px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--wp--preset--color--emphasis-primary);
  border: 2px solid transparent;
  border-radius: 6px;
  transition: color var(--transition-base), border-color var(--transition-base);
  cursor: pointer;
  min-width: 49px;
  min-height: 49px;
}

.ibt-header-wooicons > a,
.ibt-header-wooicons > button {
  background: none;        /* remove UA button fill */
  border: none;            /* remove default borders */
  padding: 0;
  margin: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 2.25rem;
  height: 2.25rem;
  cursor: pointer;
}

.ibt-header-wooicons svg {
  width: 24px;
  height: 24px;
  display: block;
  pointer-events: none;
}

/* Highlight cart item count badge in brand blue with white text */
.wc-block-mini-cart__badge {
  background-color: var(--wp--preset--color--emphasis-secondary);
  color: #fff;
}

/* ----------------------------------------------------------------------
   3.3 – Header Search
   ---------------------------------------------------------------------- */
/* Handle search toggle and field behaviour controlled by ibt-header.js. */

.ibt-header-search-field { display: none; }

.ibt-header-search-toggle {
  background: none;
  border: none;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 2.25rem;
  height: 2.25rem;
  cursor: pointer;
}

/* Show search field when header JS adds .is-open. */
.ibt-header-search.is-open .ibt-header-search-field {
  display: grid;
  align-items: center;
  height: var(--wp--custom--search--height);
  width: 280px;
}

.ibt-header-search.is-open .ibt-header-search-field input[type="search"] {
  width: 100%;
  box-sizing: border-box;
  padding: var(--wp--custom--search--padding--top)
           var(--wp--custom--search--padding--right)
           var(--wp--custom--search--padding--bottom)
           var(--wp--custom--search--padding--left);
  border: 2px solid var(--wp--custom--color--color-header-border);
  border-radius: var(--wp--custom--search--border--radius);
  background: #fff;
  font-size: var(--wp--preset--font-size--s);
  line-height: 1.4;
}

.ibt-header-search.is-open .ibt-header-search-field input[type="search"]:focus-visible {
  outline: none;
}

/* ---- Responsive: narrow screens (≤600 px) ----
   Shrink search box for smaller layouts. */
@media (max-width: 600px) {
  .ibt-header-search.is-open .ibt-header-search-field { width: 140px; }
}

/* ---- Responsive: very narrow screens (≤410 px) ----
   Hide account + cart icons to make space for open search. */
@media (max-width: 410px) {
  .ibt-header:has(.ibt-header-search.is-open)
    .ibt-header-icons [data-block-name="woocommerce/customer-account"],
  .ibt-header:has(.ibt-header-search.is-open)
    .ibt-header-icons [data-block-name="woocommerce/mini-cart"] {
    display: none;
  }
}


/* ----------------------------------------------------------------------
   3.4 – Desktop Navigation
   ---------------------------------------------------------------------- */

/* ----- 3.4.A Layout and tap targets -----
   Keep nav horizontal, evenly spaced, and AAA-compliant for touch. */

.ibt-header-nav-dual .ibt-header-nav-desktop .wp-block-navigation__container {
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  align-items: center;
}

.ibt-header-nav-desktop .wp-block-navigation__container
  .wp-block-navigation-item__content,
.ibt-header-nav-desktop .wp-block-navigation__submenu-container
  .wp-block-navigation-item__content {
  display: flex;
  align-items: center;
  line-height: 1.2;
  min-height: 48px; /* AAA baseline */
  padding-top: 0;
  padding-bottom: 0;
}

/* Equal horizontal padding for all clickable elements. */
.ibt-header-nav-desktop :is(
  a.wp-block-navigation-item__content,
  button.wp-block-navigation-item__content,
  button.wp-block-navigation-submenu__toggle,
  button.wp-block-navigation-item__content.wp-block-navigation-submenu__toggle
) {
  padding-left:  clamp(7px, 1.81vw - 7.1px, 20px);
  padding-right: clamp(7px, 1.81vw - 7.1px, 20px);
}

/* Compact gap between items (replaces blockGap in header.html). */
.ibt-header .ibt-header-nav-dual .ibt-header-nav-desktop {
  gap: 6px;
}

/* ----- 3.4.B Typography and scaling-----
   Adjust text size smoothly with viewport width. */

.ibt-header-nav-desktop .wp-block-navigation__container {
  font-size: clamp(17.6px, 0.4vw + 14.4px, 24px);
  line-height: 1.4;
  letter-spacing: 0.01em;
  font-weight: 600; /* semi-bold */
}

/* ----- 3.4.C Borders and default state -----
   Prepare for tab-index styling (3.4 d). */

.ibt-header-nav-desktop .wp-block-navigation-item__content {
  border: 2px solid transparent;
  border-radius: 6px 6px 0 0;
  border-bottom: none; /* tab illusion */
  background-color: var(--wp--custom--color--color-header-bg);
  transition: border-color var(--transition-base),
              color var(--transition-base),
              background-color var(--transition-base);
}




/* =====================================================================
   IBT Header Navigation – Active / Ancestor Styling (Top-level only)
   ===================================================================== */

/* Local test palette (override later with theme tokens) */
.ibt-header-nav-desktop {
  --color-header-tab-default: #DCD6CF;  /* normal tab fill */
  --color-header-tab-related: #EBE8E3;  /* ancestor section */
  --color-header-tab-active:  #FAF9F7;  /* current page */
  --color-header-tab-hover:   #FAF9F7;  /* hover */
  --color-header-tab-border:  #4A443E;  /* active/ancestor border */
  --color-header-tab-soft:    #8D8780;  /* subtle border for inactive */
}

/* Default / Inactive */
.ibt-header-nav-desktop .wp-block-navigation-item__content {
  background-color: var(--color-header-tab-default);
  border: 1px solid var(--color-header-tab-soft);
  border-bottom: none;
  color: var(--wp--preset--color--emphasis-primary);
}

/* === Top-level only: Active & Ancestor =============================== */

/* Exact page match (active) */
.ibt-header-nav-desktop
  > ul > li > a.wp-block-navigation-item__content[data-ibt-state="active"] {
  background-color: var(--color-header-tab-active);
  border-color: var(--color-header-tab-border);
  border-bottom: none;
  color: black;
}

/* Section parent (ancestor) */
.ibt-header-nav-desktop
  > ul > li > a.wp-block-navigation-item__content[data-ibt-state="ancestor"] {
  background-color: var(--color-header-tab-related);
  border-color: var(--color-header-tab-border);
  border-bottom: none;
  color: black;
}

/* === Submenu parent highlight via :has() ============================= */

/* Highlight parent button when any child is active or ancestor */
.ibt-header-nav-desktop
  > ul > li.has-child:has(a.wp-block-navigation-item__content[data-ibt-state="active"]) > button.wp-block-navigation-item__content,
.ibt-header-nav-desktop
  > ul > li.has-child:has(a.wp-block-navigation-item__content[data-ibt-state="ancestor"]) > button.wp-block-navigation-item__content {
  background-color: var(--color-header-tab-related);
  border-color: var(--color-header-tab-border);
  border-bottom: none;
  color: black;
}

/* === Hover / Focus ======================== */

.ibt-header-nav-desktop
  a.wp-block-navigation-item__content:not([data-ibt-state="active"]):hover,
.ibt-header-nav-desktop
  a.wp-block-navigation-item__content:not([data-ibt-state="active"]):focus-visible,
.ibt-header-nav-desktop
  button.wp-block-navigation-item__content:not([data-ibt-state="active"]):hover,
.ibt-header-nav-desktop
  button.wp-block-navigation-item__content:not([data-ibt-state="active"]):focus-visible {
  background-color: var(--color-header-tab-hover);
  border-color: var(--color-header-tab-border);
  border-bottom: none;
  color: black;
}


/* ----- 3.4.D - Submenu containers -----
   Match header background for drop-downs. */
.ibt-header-nav-desktop .wp-block-navigation__submenu-container {
  background-color: var(--wp--custom--color--color-header-bg) !important;
  border-radius: 6px;
}

/* Remove automatic ▼ icon from desktop nav items to avoid styling problems.*/
.ibt-header-nav-desktop .wp-block-navigation__submenu-icon {
  display: none !important;
}

/* Default visibility — desktop nav active, mobile turned off */
.ibt-header-nav-dual .ibt-header-nav-desktop { display: block; }
.ibt-header-nav-dual .ibt-header-nav-mobile  { display: none; }


/* ----------------------------------------------------------------------
   3.5 – Mobile Navigation
   ---------------------------------------------------------------------- */

/* Collapse all submenus by default and only reveal those opened by WordPress. */
.ibt-header-nav-mobile .wp-block-navigation__responsive-container.is-menu-open
  .wp-block-navigation__submenu-container {
  display: none;
}

.ibt-header-nav-mobile .wp-block-navigation__submenu-container.is-open,
.ibt-header-nav-mobile .wp-block-navigation-submenu__toggle[aria-expanded="true"]
  + .wp-block-navigation__submenu-container,
.ibt-header-nav-mobile .wp-block-navigation-submenu__toggle[aria-expanded="true"]
  ~ .wp-block-navigation__submenu-container {
  display: block;
}

/* Add padding inside the mobile overlay when menu is open. */
.ibt-header-nav-mobile
  :is(.wp-block-navigation__responsive-container,
      .wp-block-navigation__responsive-dialog).is-menu-open
  .wp-block-navigation__responsive-container-content {
  padding: 1.5rem;
}

/* Add equal padding to all mobile menu items. */
.ibt-header-nav-mobile
  :is(a.wp-block-navigation-item__content,
      button.wp-block-navigation-submenu__toggle) {
  padding-left: 1rem !important;
  padding-right: 1rem !important;
}

/* Ensure open and close buttons meet AAA tap target and visual feedback. */
.ibt-header-nav-mobile
  :is(.wp-block-navigation__responsive-container-open,
      .wp-block-navigation__responsive-container-close) {
  min-width: 49px;
  min-height: 49px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 2px solid transparent;
  border-radius: 6px;
  color: var(--wp--preset--color--emphasis-primary);
  cursor: pointer;
  transition: color var(--transition-base),
              border-color var(--transition-base);
}

/* Ensure mobile nav items meet AAA tap-target size and stay vertically centred. */
.ibt-header-nav-mobile
  :is(.wp-block-navigation__container a.wp-block-navigation-item__content,
      .wp-block-navigation__container button.wp-block-navigation-item__content,
      .wp-block-navigation__submenu-container a.wp-block-navigation-item__content,
      .wp-block-navigation__submenu-container button.wp-block-navigation-item__content) {
  min-height: 48px;
  display: flex;
  align-items: center;
}

/* Match overlay background to header background colour. */
.wp-block-navigation__responsive-container,
.wp-block-navigation__responsive-dialog {
  background-color: var(--wp--custom--color--color-header-bg) !important;
}

/* ---- Responsive: narrow screens (≤799 px) ----
   Swap desktop / mobile nav elements. */
@media (max-width: 799px) {
  .ibt-header-nav-dual .ibt-header-nav-desktop { display: none; }
  .ibt-header-nav-dual .ibt-header-nav-mobile  { display: block; }
}

/* ----------------------------------------------------------------------
   3.6 – Footer
   ---------------------------------------------------------------------- */

/* Outer wrapper */
.ibt-footer {
    background: var(--wp--custom--color--color-footer-bg);
    border-top: 1px solid var(--wp--custom--color--color-footer-border);
    padding-top: var(--spacing-s);
    padding-bottom: var(--spacing-s);
}

/* Wide inner wrapper: constrain spacing without breaking alignwide */
.ibt-footer .alignwide {
    padding-top: var(--spacing-xs);
    padding-bottom: var(--spacing-xs);
}

/* Typography defaults in footer */
.ibt-footer p,
.ibt-footer a {
    font-family: var(--wp--preset--font-family--title-font);
    line-height: 1.4;
    text-decoration: none;
}

.ibt-footer a:hover,
.ibt-footer a:focus {
    text-decoration: underline;
}


/* --------------------------------------------------------------
   Column behaviour
   Desktop = 4 columns (default Gutenberg)
   Tablet = 3 columns (Column 3 hidden)
   Mobile = stacked
   -------------------------------------------------------------- */

/* Base: show all */
.ibt-footer-col-1,
.ibt-footer-col-2,
.ibt-footer-col-3,
.ibt-footer-col-4 {
    display: block;
}

/* Tablet: hide entire contact column */
@media (max-width: 1023px) and (min-width: 768px) {
    .ibt-footer-col-3 {
        display: none !important;
    }
}


/* --------------------------------------------------------------
   Visibility of duplicates
   -------------------------------------------------------------- */

/* Desktop default: show Column 3 items, hide duplicates in other columns */
@media (min-width: 1024px) {

    /* Hide duplicates in Column 2 */
    .ibt-footer-tel-c2,
    .ibt-footer-email-c2 {
        display: none !important;
    }

    /* Hide tablet/mobile CTAs in Column 4 */
    .ibt-footer-contact-tablet,
    .ibt-footer-contact-mobile,
    .ibt-footer-backtotop-c4 {
        display: none !important;
    }
}

/* Tablet 768–1023px: hide column 3 originals, show duplicates */
@media (max-width: 1023px) and (min-width: 768px) {

    /* Hide Column 3 originals */
    .ibt-footer-tel-c3,
    .ibt-footer-email-c3,
    .ibt-footer-contact-desktop,
    .ibt-footer-backtotop-c3 {
        display: none !important;
    }

    /* Show Column 2 duplicates for tablet */
    .ibt-footer-tel-c2,
    .ibt-footer-email-c2 {
        display: block !important;
    }

    /* Show Column 4 tablet CTA + back-to-top */
    .ibt-footer-contact-tablet,
    .ibt-footer-backtotop-c4 {
        display: block !important;
    }

    /* Hide mobile CTA */
    .ibt-footer-contact-mobile {
        display: none !important;
    }
}

/* Mobile <768px: stack everything, show only mobile-friendly versions */
@media (max-width: 767px) {

    /* Hide column 3 entirely */
    .ibt-footer-col-3 {
        display: none !important;
    }

    /* Show mobile CTA, hide tablet + desktop */
    .ibt-footer-contact-mobile {
        display: block !important;
    }
    .ibt-footer-contact-tablet,
    .ibt-footer-contact-desktop {
        display: none !important;
    }

    /* Hide most duplicates unless desired */
    .ibt-footer-tel-c2,
    .ibt-footer-email-c2 {
        display: none !important;
    }

    /* Mobile back to top (c4 version) */
    .ibt-footer-backtotop-c4 {
        display: block !important;
    }
}


/* --------------------------------------------------------------
   Logo Behaviour
   -------------------------------------------------------------- */

.ibt-footer-col-1 img {
    width: 100%;
    height: auto;
    object-fit: contain;
    max-width: 180px; /* Keeps desktop neat */
}

@media (max-width: 1023px) {
    .ibt-footer-col-1 img {
        max-width: 150px;
    }
}

@media (max-width: 767px) {
    .ibt-footer-col-1 img {
        max-width: 120px;
        margin-left: auto;
        margin-right: auto;
    }
}


/* --------------------------------------------------------------
   Social Icons
   -------------------------------------------------------------- */

.ibt-social-icons a svg {
    width: 32px;
    height: 32px;
    fill: var(--wp--custom--color--color-footer-text); /* Drab base */
    transition: fill var(--transition-fast, 0.2s ease-in-out);
}

/* Hover/active on ALL devices */
.ibt-social-icons a:hover svg,
.ibt-social-icons a:focus svg,
.ibt-social-icons a:active svg {
    /* Brand-accurate colours */
}

.ibt-social-icons a[href*="facebook"] svg      { --brand-colour: #1877F2; }
.ibt-social-icons a[href*="youtube"] svg       { --brand-colour: #FF0000; }
.ibt-social-icons a[href*="whatsapp"] svg      { --brand-colour: #25D366; }
.ibt-social-icons a[href*="instagram"] svg     { --brand-colour: #E1306C; /* Accessible alt */ }

/* Apply brand colour on hover */
.ibt-social-icons a:hover svg,
.ibt-social-icons a:focus svg,
.ibt-social-icons a:active svg {
    fill: var(--brand-colour);
}


/* --------------------------------------------------------------
   Legal + Text tone
   -------------------------------------------------------------- */

.ibt-footer-legal a,
.ibt-footer-copyright,
.ibt-footer-address,
.ibt-footer-charity {
    color: var(--wp--custom--color--color-footer-text);
}

.ibt-footer-legal a:hover,
.ibt-footer-name a:hover {
    color: var(--wp--custom--color--color-accent);
    text-decoration: underline;
}


/* --------------------------------------------------------------
   CTA buttons for consistency
   -------------------------------------------------------------- */

.ibt-footer-contact-us .wp-element-button {
    padding: 0.5rem 1.2rem;
    border-radius: 0.25rem;
    font-size: var(--wp--preset--font-size--s);
}




/* ======================================================================
   4. LAYOUT / SPACING
   Root padding and group / wide constraints
   ====================================================================== */

/* ---------------------------------------------------------------------
   4.1 Root Padding System
  
   WordPress core "root-padding" is unpredictable, varies by context,
   and conflicts with nested Group block padding. This system replaces
   it with a single class-based model that applies theme-wide spacing
   in a predictable, token-driven way.

   How it works:
   • Resets all Group block padding to 0 using :where() for zero specificity.
     Removes most WP default padding (& any from theme.json) but editor padding survives.
   • Applies fluid root padding via theme.json token to any wrapper using .ibt-rootp-apply.
   • Ensures backgrounds stop cleanly at the content rail unless .alignfull is used.

   Notes:
   • Adjust the clamp() value in theme.json → layout.root-padding to change spacing globally.
   • Add .ibt-rootp-apply to any outer wrapper (e.g. <main>) to apply global rails.
   • Manual group padding is generally not required in editor but can be used if needed. */

/* Reset Group block padding (neutral base) */
:where(.wp-block-group) {
  padding: 0;
}

/* Apply theme root padding on outer wrappers */
.ibt-rootp-apply {
  padding-inline: var(--wp--custom--layout--root-padding);
}

/* Constrain inner groups to content rail unless .alignfull or .ibt-rootp-bg-exempt */
.ibt-rootp-apply > :not(.alignfull):not(.ibt-rootp-bg-exempt) {
  box-sizing: content-box;
}


/* ---------------------------------------------------------------------
    4.2 - SINGLE POST WITH SIDEBAR

single.html
   • One-article layout with optional right sidebar.
   • Sidebar (<aside>) lives inside second column (.ibt-sideb-sideb).
   • Sticky CTAs use .ibt-sideb-sticky (position: sticky; top: 50vh).
   • Mobile bar <aside.ibt-sideb-mobile> shown ≤50rem; desktop hidden.
   • Outer <main> uses .ibt-rootp-apply for global root padding. 
   
Purpose:
   Manage two-column post layouts with an optional sidebar and mobile CTA bar.

   Desktop (>60rem)
   • Two columns (5/8 content, 3/8 sidebar)
   • Equal-height columns via flex stretch
   • Sticky CTA (.ibt-sideb-sticky) ensures visible sidebar content
   • Mobile bottom bar (.ibt-sideb-mobile) hidden

   Mobile (≤60rem)
   • Sidebar hidden, bottom bar shown
   • Content column expands to full width

   Editor
   • Both sidebar and bottom bar visible for editing convenience */

   /* ******************************************************************
                DEV REQUIRED – Future Semantic Enhancement
  
   Once single.html and sidebar templates are stable:
   • Move HTML semantics (role="complementary", aria-label="Sidebar")
     into PHP via render_block filter.
   • Implement in theme /inc/semantics.php and include from functions.php.
   • Purpose: preserve <div> for Gutenberg editor compatibility while
     providing <aside>-equivalent semantics on front-end render only.
   ********************************************************************* */

/* Columns container (main + sidebar) */
.ibt-sideb-columns {
  display: flex;
  align-items: stretch;                           /* equal column heights */
  gap: var(--wp--preset--spacing--l);
  max-width: var(--wp--style--global--wide-size);
  margin-inline: auto;

  /* Ratio + guards (variable defs) */
  --_gap: var(--wp--preset--spacing--l);
  --_content-ratio: 0.625;                        /* 5/8 */
  --_sidebar-ratio: 0.375;                        /* 3/8 */
  --_content-max: var(--wp--custom--sideb--size-content, 50rem);
  --_content-min: 33rem;                          /* readable floor */
  --_sidebar-min: 20rem;                          /* usable product-card floor */
}

/* Simple neutral grey background */
.ibt-sideb-sideb.ibt-rootp-bg-exempt {
  background-color: #f6f6f6; /* revert to solid colour */
  border-left: 1px solid var(--wp--preset--color--border-dark, #999);
  border-right: 1px solid var(--wp--preset--color--border-dark, #999);
}

/* Main content column (clamped by ratio + guards) */
.ibt-sideb-columns .ibt-sideb-content {
  flex: 0 0 clamp(
    var(--_content-min),
    calc(var(--_content-ratio) * (100% - var(--_gap))),
    var(--_content-max)
  ) !important;
  max-width: clamp(
    var(--_content-min),
    calc(var(--_content-ratio) * (100% - var(--_gap))),
    var(--_content-max)
  ) !important;
  display: flex;
  flex-direction: column;
}

/* Sidebar column (clamped by ratio + min)
   Flex layout keeps spacers and stacking natural. */
.ibt-sideb-sideb {
  flex: 1 1 clamp(
    var(--_sidebar-min),
    calc(var(--_sidebar-ratio) * (100% - var(--_gap))),
    calc(100% - var(--_content-min) - var(--_gap))
  );
  min-width: var(--_sidebar-min);
  padding-left: var(--wp--custom--layout--root-padding);
  display: flex;
  flex-direction: column;

  /* footer clearance */
  margin-bottom: var(--wp--preset--spacing--xl);
}

/* Sticky CTA: opt-in via .ibt-sideb-sticky */
.ibt-sideb-sideb .ibt-sideb-sticky {
  position: sticky;
  top: 50vh;                                      /* mid-viewport feel */
  align-self: flex-start;
}

/* ----- Responsive Sidebar Adaption ----- */

/* Default desktop/tablet */
.ibt-sideb-mobile { display: none; }

/* Collapse to mobile layout */
@media (max-width: 60rem) {
  .ibt-sideb-sideb { display: none; }  /* hide sidebar */
  .ibt-sideb-mobile { display: block; } /* show mobile bottom bar */

  /* Content goes full width */
  .ibt-sideb-columns .ibt-sideb-content {
    flex: 1 1 100% !important;
    max-width: 100% !important;
  }
}

/* ibt-editor.css makes both desktop and mobile vestions visible in editor only */


/* ---------------------------------------------------------------------
                      4.3 - EVENT FORMATTING
  ---------------------------------------------------------------------- */

/* ----- 4.3.1 EVENT MULTIPLE VIEWS -----*/

/* Highlight event-online */
.ibt-event-field--ibt-event-online {
  font-weight: 700;
  color: var(--wp--preset--color--emphasis-accent);
  font-family: var(--wp--preset--font-family--heading);
}

/* ----- 4.3.2 EVENT ARCHIVE -----*/

/* Base Reset */
.ibt-events-archive,
.ibt-events-archive * {
  margin: 0;
  padding: 0;
  gap: 0;
  list-style: none;
}
.ibt-events-archive {--wp--style--block-gap: 0;}

/* Title/toggle row */
.ibt-archive-header {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: center;
  gap: var(--wp--preset--spacing--s);
  padding-top: var(--wp--preset--spacing--l);
  padding-bottom: var(--wp--preset--spacing--m);
}

/* Fix width for toggle button */
.ibt-event-toggle-btn {width: 15rem;}

/* 2/3 width <hr> */
.ibt-events-archive hr {
  width: clamp(12rem, 66%, 53rem);
  margin-inline: auto;
  margin-block: var(--wp--preset--spacing--s);
  border: none;
  border-top: 2px solid var(--wp--preset--color--border-dark, #999);
}

/* Event heading to H3 size (semantically H2) */
.ibt-event-title { font-size: var(--wp--preset--font-size--xl);}

/* Paragraph fields and excerpts - tight spacing*/
.ibt-event-list-item p { padding-block: 0.3rem;}

/* ----- 4.3.2 EVENT ARCHIVE -----*/

/* Bigger font for event-online to make it stand out */
.single-ibt_event .ibt-event-field--ibt-event-online {
  font-size: var(--wp--preset--font-size--l);
}

/* Tighten spacing between Venue name and address */
.single-ibt_event .ibt-event-field--ibt-event-venue-name p {
  margin-bottom: 0;
  padding-bottom: 0;
}
.single-ibt_event .ibt-event-field--ibt-event-venue-address p {
  margin-top: 0;
  padding-top: 0;
}

/* ----- Event List (shortcode) ----- */
/* Scoped to .ibt-events-list-shortcode only */

/* Spacing reset for tight layout */
.ibt-events-list-shortcode,
.ibt-events-list-shortcode * {
  margin: 0;
  padding: 0;
  gap: 0;
  list-style: none;
}

/* Individual event titles (h3) — theme L size */
.ibt-events-list-shortcode .ibt-event-title {
  font-size: var(--wp--preset--font-size--l);
  margin-top: var(--wp--preset--spacing--s);
}

/* Card-style frame around the entire list */
.ibt-events-list-shortcode {
  border: 1px solid var(--wp--preset--color--border-dark, #999);
  border-radius: var(--wp--preset--spacing--xs);
  padding: var(--wp--preset--spacing--m);
  background-color: var(--wp--preset--color--surface, #fff);
  margin-block: var(--wp--preset--spacing--m);
}


/* ---------------------------------------------------------------------
   4A - WooCommerce (Temporary numbering until full refactor.)
   WooCommerce section for all store-related styling.
   --------------------------------------------------------------------- */

/* ----- 4A.1 - Global resets, helpers & styling -----------------------
   General resets and styling that applies across Woo store */

/* Woo buttons are styled with general buttons */ 

/* Price – heading font for all Woo contexts */
.woocommerce-Price-amount {
  font-family: var(--wp--preset--font-family--heading);
}

/* Universal spacing & font size for WooCommerce breadcrumbs */
.wp-block-breadcrumbs,
.wc-block-breadcrumbs {
  padding-block-start: var(--wp--preset--spacing--s);
  font-size:  var(--wp--preset--font-size--s) !important;
}

/* ----- WooCommerce links -----
   Product titles use underline on hover only.
   Beats base styling by specificity (and later)
   DEV – extend selector list as new Woo templates are styled. */

/* Base state */
.wc-block-product .wp-block-post-title a {
  text-decoration: none ; 
  transition:
    text-underline-offset var(--transition-base),
    text-decoration-thickness var(--transition-base);
}

/* Hover */
.wc-block-product .wp-block-post-title a:hover {
  text-decoration: underline !important;
  text-underline-offset: 0.2em;
  transition:
    text-underline-offset var(--transition-base),
    text-decoration-thickness var(--transition-base);
}



/* ----- 4A.2 - Shop archive / product grid ----------------------------
   Styling that applies to all archive/grid views */

/* Compact heading/paragraph rhythm for product grids */
:is(
  .wp-block-post-template,
  .wp-block-woocommerce-product-template,
  .wp-block-query-loop
) :where(h1, h2, h3, h4, h5, h6, p) {
  margin-block: 0;
  padding-block: 0.1em;
}

/* Author line – smaller, centred in product grids */
.wc-block-product .ibt-author-parastyle {
  font-size: var(--wp--preset--font-size--m);
  text-align: center;
}

/* Use heading font for product prices in grid */
.wc-block-components-product-price {
  font-family: var(--wp--preset--font-family--heading);
}

/* Adjust 'in basket' button text size inside to match geeneral button */
.wc-block-components-product-button__button.has-small-font-size span[data-wp-text="state.addToCartText"] {
  font-size: var(--wp--preset--font-size--m);
  line-height: 1.2;
}

/* Add space below 'Add to basket' button for visual balance */
.wc-block-components-product-button {
  margin-bottom: var(--wp--preset--spacing--s);
}

/* ----- 4A.3 - Single product -------------------------------------------
   Styling that applies to just the single product template */

/* Remove padding and margin from Woo gallery wrappers and centre image */
.single-product .wp-block-woocommerce-product-image-gallery,
.single-product div.product div.images,
.single-product .woocommerce-product-gallery,
.single-product .woocommerce-product-gallery__wrapper,
.single-product .woocommerce-product-gallery__image {
  padding: 0 !important;
  margin: 0 !important;
  float: none !important;
  display: block;
  text-align: center;
}

/* Desktop & tablet only – scale product image to suit medium size screen. */
@media (min-width: 783px) {

  /* Fluid column width ONLY inside Woo product gallery wrapper */
  .single-product .product .wp-block-columns > .wp-block-column:first-child {
      flex: 0 0 clamp(240px, 40vw, 512px) !important;
      min-width: 0 !important;
  }

  /* Image fills its (now fluid) column */
  .single-product .woocommerce-product-gallery__image img {
    width: 100%;
    height: auto;
    display: block;
  }
}

/* Mobile – reduce image size and add vertical separation */
@media (max-width: 782px) {

  /* Scale down the image to a reasonable size */
.single-product .woocommerce-product-gallery__image img {
    width: clamp(200px, 70vw, 450px) !important;
    height: auto;
    display: block;
}

  /* We tried to centre the image but gave up... */

  /* Vertically separate image from summary */
  .single-product .product .wp-block-columns.alignwide {
      row-gap: var(--wp--preset--spacing--l);
  }
}

/* Balanced gutter between image and text columns */
.single-product .wp-block-columns.alignwide {
  column-gap: var(--wp--preset--spacing--l) !important;
}

/* Add top margin to image column */
.single-product .wp-block-columns.alignwide > .wp-block-column:first-child {
  margin-block-start: var(--wp--preset--spacing--s) !important;
}

/* Compact text rhythm for single product layout
   Note – reduces vertical gaps from Woo defaults; may relax later via json. */
.single-product :where(h1, h2, h3, h4, h5, h6, p) {
  padding-block: 0.3rem !important;
  margin: 0 ;
}

/* Adjust single product title size */
.single-product .wc-block-product-title,
.single-product .wp-block-post-title {
  font-size: var(--wp--preset--font-size--xl);
  line-height: 1.1;
  padding-bottom: 0 !important;
}

/* Set font size for author */
.single-product .ibt-author-parastyle {
  font-size: var(--wp--preset--font-size--l);
}

/* Adjust spacing for Publisher (product_brand) line under Author */
.single-product .taxonomy-product_brand.wp-block-post-terms {
  margin-block-start: 0.25rem;
  margin-block-end: 0.25rem;
}

/* Typography and spacing for product price */
.single-product .woocommerce-Price-amount {
  font-size: var(--wp--preset--font-size--l);
}
.single-product .wp-block-woocommerce-product-price,
.single-product .wp-block-woocommerce-product-price > .wc-block-components-product-price {
  margin-block: 0;
  padding-block: 0 0.3rem;
  line-height: 1;
}

/* Add space above Add-to-Cart area to separate it from short description */
.single-product .wp-block-add-to-cart-form,
.single-product .wc-block-add-to-cart-form {
  margin-block-start: var(--wp--preset--spacing--s);
}

/* Use heading font and medium size for classic Woo quantity input */
.single-product input.input-text.qty {
  font-family: var(--wp--preset--font-family--heading);
  font-size: var(--wp--preset--font-size--m);
}

/* Hide category line in single-product.
Note - may want to turn it back on so left in template. */
.single-product .taxonomy-product_cat.wp-block-post-terms {
  display: none !important;
}

/* Floating frame + centered label for express checkout on SINGLE PRODUCT only */
.single-product .wcpay-express-checkout-wrapper {
    position: relative;
    border: 1px solid var(--wp--preset--color--border-dark, #999);
    border-radius: 0.5rem;
    background: var(--color-background, #FAF9F7);
    padding: 1.25rem 0.75rem 0.75rem;
    margin-bottom: 1.5rem;
}
.single-product .wcpay-express-checkout-wrapper::before {
    content: "Buy Now";
    position: absolute;
    top: -0.65rem;
    left: 50%;
    transform: translateX(-50%);
    background: var(--color-background, #FAF9F7);
    padding: 0 0.5rem;
    font-size: 0.875rem;
    font-weight: 600;
}


/* Improve readability of classic WooCommerce tab headers */
.single-product ul.wc-tabs li a {
  font-size: var(--wp--preset--font-size--l);
  font-family: var(--wp--preset--font-family--heading);
  font-weight: 600;
  line-height: 1.3;
}

/* Hide repeated H2 headings inside Woo product tabs */
.single-product .woocommerce-Tabs-panel > h2:first-child {
  display: none !important;
}

/* Add gentle vertical rhythm to paragraphs in the main Description tab */
.single-product .woocommerce-Tabs-panel--description p {
  margin-block: 0.5em;
}

/* Adjust font size of the reviews title for consistency with theme typography */
.single-product .woocommerce-Reviews-title {
  font-size: var(--wp--preset--font-size--xl);
  font-weight: 600;
  line-height: 1.2;
  margin-block: var(--wp--preset--spacing--m);
}

/* ----- 4A.4 - Cart, checkout & notices ---------------------------------
   Styling that applies to cart and checkout */

/* Supress excerpts in mini cart */
.wc-block-mini-cart__drawer .wc-block-components-product-metadata__description > p { 
  display: none !important; 
}

/* Suppress product excerpts in full cart view */
.wc-block-cart .wc-block-components-product-metadata__description > p {
  display: none !important;
}


/* ======================================================================
   5. UTILITIES
   SR-only, status colours, notices, dev/test helpers
   ====================================================================== */

/* Prevent media (img/video/iframe/etc) overflowing */
img, video, iframe, embed, object { max-width: 100%; height: auto; display: block;}

/* Anchor scroll offset to prevent in-page targets hiding behind sticky header */
h1[id], h2[id], h3[id], h4[id], h5[id], h6[id] {scroll-margin-top: 102px;}

/* Screen-reader only text */
.screen-reader-text {
  position: absolute !important;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip-path: inset(50%);
  white-space: nowrap;
  border: 0;
}

/* Editor-only: force both nav variants visible in Site Editor
   (keeps blocks selectable while editing) - Now in ibt-editor.css */


/* ======================================================================
   6. STATES & MEDIA
   Breakpoints, reduced motion, print
   ====================================================================== */

/* Responsive code moved to sections to keep it in more human logical flow */



/* ---------------------- 6.4 Print Safeguards ------------------ */

/* --- Prevent print layout issues (sticky header, double nav) --- */
@media print {
  /* Show desktop navigation and hide mobile navigation */
  .ibt-header-nav-dual .ibt-header-nav-desktop { display: block !important; }
  .ibt-header-nav-dual .ibt-header-nav-mobile  { display: none !important; }

  /* Disable sticky positioning for header and its template wrapper */
  .ibt-header-sticky,
  .wp-block-template-part:has(> .ibt-header-sticky) {
    position: static !important;
    top: auto !important;
  }
}

/* ---------------------- 6.5 Reduced Motion ------------------ */

/* --- Implement user reduced-motion preference (WCAG compliance) --- */
@media (prefers-reduced-motion: reduce) {
  /* Disable smooth scrolling if set anywhere */
  :root, html:focus-within { scroll-behavior: auto !important; }
  /* Disable animations/transitions across the UI */
  *, *::before, *::after {
      animation: none !important;
      transition: none !important;
  }
}


/* ======================================================================
   7. DEV – WIP CODE
   ====================================================================== */
/* !!!!!! THIS BLOCK SHOULD BE COMMENTED OUT IN PRODUCTION !!!!!!
   DEV ONLY - Make any use of default button styles extremely obvious in dev. 
   When this is 'turned off' reasonable defaults come from theme.json   */

.is-style-fill .wp-element-button,
.is-style-outline .wp-element-button {
  background-color: hotpink !important;
  color: magenta !important;
  border-color: yellow !important;
}
/* !!! END DEV ONLY BLOCK !!! */
/* ====================================================================== */

/* WORK IN PROGRESS CODE BELOW THIS LINE */


/* Search result type badge */
.ibt-search-type-label {
  text-align: center;
  padding: var(--wp--preset--spacing--l) 0;
  margin: 0; /* remove default heading margin */
  line-height: 1.2;
}

/* Search result type column */
.ibt-search-badge-column {
  background: var(--wp--preset--color--alt-background);
  border: 1px solid var(--wp--preset--color--border-dark);
  border-radius: 10px;
}

/* Convert badge to header on mobile */
@media (max-width: 782px) {
  .ibt-search-badge-column {
    background: var(--wp--preset--color--background);
    border: none; 
    border-top: 2px solid var(--wp--preset--color--border-dark);
    border-radius: 0;
    margin-bottom: 0;
  }
  .ibt-search-type-label {
    padding: var(--wp--preset--spacing--xs);
  }
  .ibt-search-result-column {
    row-gap: var(--wp--preset--spacing--xs); /* overrides big default blockGap */
  }
  .ibt-search-columns {
    row-gap: 0;
    
  }
}



/* **********************************************************************
   END IBT THEME CSS
   ********************************************************************** */