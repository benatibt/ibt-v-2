/* **********************************************************************************************************
                                         IBT – MINIMAL FRONT END STYLE SHEET
   Purpose: minimal structural helpers only. Keep colours, typography and hover effects in
   theme.json where ever possible. Temporary test rules allowed if clearly marked and cleaned up as you go.
  *********************************************************************************************************** */

/* ===========================================================================================================
     IBT – WordPress 6.8 helpers to prevent core "features" causing problems and do things json can't yet.     */

/* 1. Ensure images, videos, iframes, etc. never overflow their container.
Core handles most cases but some embeds still slip through. */
img, video, iframe, embed, object { max-width: 100%; height: auto; display: block;}

/* 2. Anchor scroll margin -  Prevent headings with IDs from hiding under the sticky header when used as anchor targets.
      ADJUST TO MATCH HEADER IF CHANGED. */
h1[id], h2[id], h3[id], h4[id], h5[id], h6[id] {scroll-margin-top: 102px;}

/* 3. Set per-level heading styles that cannot yet be expressed in theme.json (WP 6.8 limitation). 
Migrate when core adds level-specific controls to json.                                                                                                 */
h1 {font-size: var(--wp--preset--font-size--xxxl); font-weight: 700 ; padding-top: var(--wp--preset--spacing--xl) ; padding-bottom: var(--wp--preset--spacing--s);}
h2 {font-size: var(--wp--preset--font-size--xxl); font-weight: 600 ; padding-top: var(--wp--preset--spacing--s) ;}
h3 {font-size: var(--wp--preset--font-size--xl); font-weight: 600 ; padding-top: var(--wp--preset--spacing--xxs) ;}
h4 {font-size: var(--wp--preset--font-size--l); font-weight: 600 ; padding-top: var(--wp--preset--spacing--xxs) ;}
h5 {font-size: var(--wp--preset--font-size--m); font-weight: 600 ; padding-top: var(--wp--preset--spacing--xxs) ;}
h6 {font-size: var(--wp--preset--font-size--m); font-weight: 450 ; padding-top: var(--wp--preset--spacing--xxs) ;}

/* 4. Give visual clue of visited links for body text only. No json option to do this. */
:where(p, li, .rich-text) a:visited {color: var(--wp--custom--color--color-text-emphasis-primary-visited);}

/* 5. Style custom button variants in CSS as not supported in json for WP6.8 ref 
      https://developer.wordpress.org/block-editor/how-to-guides/themes/global-settings-and-styles/#block-style-variations  */
  
  .wp-block-button.is-style-buy-solid .wp-block-button__link {
  background-color: var(--wp--custom--color--color-secondary);
  color: #FFFFFF;
  border: 2px solid var(--wp--custom--color--color-secondary);
}

.wp-block-button.is-style-buy-outline .wp-block-button__link {
  background-color: transparent;
  color: var(--wp--custom--color--color-secondary);
  border: 2px solid var(--wp--custom--color--color-secondary);
}

/* 5a. Add hover/focus-visible  effects for all four IBT button types. */

/* Shared behaviour for all buttons */
.wp-block-button__link {transition: transform 0.15s ease, background-color 0.15s ease, border-color 0.15s ease;}
.wp-block-button__link:hover {transform: translateY(-1px);}  /* Adds a non-colour cue (slight scale) and token-based colour shifts */
.wp-block-button__link:focus-visible {outline: 2px solid var(--wp--custom--color--color-primary); outline-offset: 2px;}

/* Primary Solid (default core) */
.wp-block-button:not(.is-style-outline):not(.is-style-buy-solid):not(.is-style-buy-outline) .wp-block-button__link:hover {
  background-color: var(--wp--custom--color--color-primary-hover);
  border-color: var(--wp--custom--color--color-primary-hover);
}

/* Prinmary Outline */
.wp-block-button.is-style-outline .wp-block-button__link:hover {
  color: var(--wp--custom--color--color-primary-hover);
  border-color: var(--wp--custom--color--color-primary-hover);
}

/* Buy Solid (Commercial) */
.wp-block-button.is-style-buy-solid .wp-block-button__link:hover {
  background-color: var(--wp--custom--color--color-secondary-hover);
  border-color: var(--wp--custom--color--color-secondary-hover);
}

/* Buy Outline (Commercial) */
.wp-block-button.is-style-buy-outline .wp-block-button__link:hover {
  color: var(--wp--custom--color--color-secondary-hover);
  border-color: var(--wp--custom--color--color-secondary-hover);
}

/* 6. Style all link hover effects in css because WP6.8 doesn't support specific styling (e.g. Nav)
and it makes more  sense to have it all in one place. */

/* 6a. Global text link hover — body links and all nav links
   EXCEPT header page list (ibt-header-pages css tag on navigation container) */

/* On hover */
:where(a[href]):not(.wp-element-button):not(.wp-block-button__link):not(.ibt-header-nav a):hover,
.wp-block-navigation:not(.ibt-header-nav) a:hover {
  text-decoration: underline;
  color: var(--wp--custom--color--color-primary-hover);
  text-decoration-thickness: 2px;
  text-underline-offset: 0.25em;
}

/* On Focus-Visible */
:where(a[href]):not(.wp-element-button):not(.wp-block-button__link):not(.ibt-header-nav a):focus-visible,
.wp-block-navigation:not(.ibt-header-nav) a:focus-visible {
  outline: 2px solid var(--wp--custom--color--color-primary);
  outline-offset: 2px;
}

/* 6b. Give different styling treatement to navigations with css tag ibt-header-pages 
      for header links and mobile nav close.                                          */

/* Add transparent box as default to avoid layout shift */      
.ibt-header-nav .wp-block-navigation-item__content,
.ibt-header-nav .wp-block-navigation__responsive-container-close {
  border: 1.5px solid transparent;
  border-radius: 6px;
  padding: 0.25rem 0.5rem; /* safe: your mobile overlay later sets bigger padding */
  transition: border-color 0.2s ease, color 0.2s ease;
}

/* On hover OR focus-visible change box color to brand color */
.ibt-header-nav .wp-block-navigation-item__content:hover,
.ibt-header-nav .wp-block-navigation-item__content:focus-visible,
.ibt-header-nav .wp-block-navigation__responsive-container-close:hover,
.ibt-header-nav .wp-block-navigation__responsive-container-close:focus-visible {
  color: var(--wp--custom--color--color-primary-hover);
  border-color: currentColor;
}


/* 7. Keep root padding without adding padding to all groups. theme.json 
      applies padding to all groups to make root padding work. Remove it
      for all groups except wp-block-group where it is required for root
      padding and groups with .ibt-root-margin css class               */
:root :where(.wp-block-group):not(.has-global-padding):not(.ibt-outer-wrap) {padding-left: 0; padding-right: 0;}

/* 8. Constrain header wide width with std root padding. Not possible in template  */
.ibt-header-inner {
  box-sizing: border-box;
  width: 100%;
  max-width: var(--wp--style--global--wide-size);
  margin-inline: auto;
  padding-inline: var(--wp--style--root--padding-left);
}

/* 9. Make header sticky for modern browsers. May not work without :has() support. */

/* 9a. Calculate sticky header offset for any WP admin bar */
:root { --ibt-adminbar-offset: 0px; }
.admin-bar { --ibt-adminbar-offset: 32px; }
@media (max-width: 782px) {
  .admin-bar { --ibt-adminbar-offset: 46px; }
}

/* 9b. Make the header sticky with the calculated offset */
.ibt-sticky,
.wp-block-template-part:has(> .ibt-sticky) {
  position: sticky;
  top: var(--ibt-adminbar-offset);
  z-index: 50; /* header sits above content */
}

/* 9c. If the template-part wrapper is also sticky, keep it just behind the header */
.wp-block-template-part:has(> .ibt-sticky) { z-index: 49; }


/* ======= 10. Responsive header behaviour ========== */

/* 10a. ---------- Defaults: tall & wide viewports ---------- */
/* Show desktop title/nav, hide mobile equivalents */
.ibt-title--desktop { display: block; }
.ibt-title--mobile  { display: none; }
.ibt-nav-dual .ibt-nav-desktop { display: block; }
.ibt-nav-dual .ibt-nav-mobile  { display: none; }

/* Harden desktop nav to stay horizontal whenever it’s visible */
.ibt-nav-dual .ibt-nav-desktop .wp-block-navigation__container {
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  align-items: center;
}

/* Row 2 forced right on wide screens */
@media (min-width: 781px) {
  .ibt-nav-dual.is-layout-flex {
    justify-content: flex-end;
  }
}

/* 10b.---------- Narrow width ≤780px ---------- */
@media (max-width: 780px) {
  
  /* Swap titles */
  .ibt-title--desktop { display: none; }
  .ibt-title--mobile  { display: block; }

  /* Swap navs */
  .ibt-nav-dual .ibt-nav-desktop { display: none; }
  .ibt-nav-dual .ibt-nav-mobile  { display: block; }

  /* Row 1 forced right on narrow screens */
  .ibt-row1.is-layout-flex {
    justify-content: flex-end;
  }

  /* Reset Row 2 to normal spacing when narrow */
  .ibt-nav-dual.is-layout-flex {
    justify-content: space-between;
  }

    /* Reduce logo column width */
  .ibt-header-inner > .wp-block-column:first-child {
    flex-basis: 70px;
    max-width: 70px;
  }

  /* ----- Mobile menu: spacing + collapsed submenus (overlay + fallback) ----- */

  /* Overlay shape (actual mobile DOM): apply token padding around and token gap between */
  .wp-block-navigation__responsive-container.is-menu-open
    .wp-block-navigation__responsive-container-content {
    padding: var(--wp--preset--spacing--l);   /* around the group (debug big) */
  }
  .wp-block-navigation__responsive-container.is-menu-open
    .wp-block-navigation__responsive-container-content > .wp-block-navigation__container {
    display: flex;
    flex-direction: column;
  }

  /* Submenus collapsed by default; open shows same token gap + modest indent */
  .wp-block-navigation__responsive-container.is-menu-open
    .wp-block-navigation__submenu-container { display: none; }

  /* Open submenu when Core marks the UL or the toggle is expanded */
  .wp-block-navigation__responsive-container.is-menu-open
    .wp-block-navigation__submenu-container.is-open,
  .wp-block-navigation__responsive-container.is-menu-open
    .wp-block-navigation-submenu__toggle[aria-expanded="true"]
    + .wp-block-navigation__submenu-container,
  .wp-block-navigation__responsive-container.is-menu-open
    .wp-block-navigation-submenu__toggle[aria-expanded="true"]
    ~ .wp-block-navigation__submenu-container {
    display: flex;
    flex-direction: column;
    padding-left: var(--wp--preset--spacing--l);
  }

   /* Mobile: tap-target padding (overlay) — applies to top-level and submenu items */
  .wp-block-navigation__responsive-container.is-menu-open
    .wp-block-navigation-item__content,
  .wp-block-navigation__responsive-container.is-menu-open
    .wp-block-navigation-submenu__toggle {
    display: block;
    padding-block: var(--wp--preset--spacing--xs);
    padding-inline: var(--wp--preset--spacing--m);
  }

  /* Mobile: larger tap target for the CLOSE button only */
  .wp-block-navigation__responsive-container.is-menu-open
    .wp-block-navigation__responsive-container-close {
    min-width: 44px;
    min-height: 44px;
    padding: var(--wp--preset--spacing--s) var(--wp--preset--spacing--s);
  }

}

/* ---------- Short viewport height ≤600px ---------- */
/* Disable sticky header entirely */
@media (max-height: 600px) {
  .ibt-sticky,
  .wp-block-template-part:has(> .ibt-sticky) {
    position: static !important;
    top: auto !important;
  }
}

/* ---------- Editor helper ---------- */
/* Always show both titles/navs inside the Site Editor iframe
   so blocks remain selectable while editing */
.editor-styles-wrapper .ibt-title--desktop,
.editor-styles-wrapper .ibt-title--mobile,
.editor-styles-wrapper .ibt-nav-dual .ibt-nav-desktop,
.editor-styles-wrapper .ibt-nav-dual .ibt-nav-mobile {
  display: block !important;
}

/* 11. === Global navigation backgrounds === */
/* Can not reliably be set from theme.json with WP6.8 and difficult
  in template with custom colors (not in palette)                   */

/* Desktop dropdown sub-menus */
.wp-block-navigation__submenu-container {
  background-color: var(--wp--custom--color--color-header-bg) !important;
}

/* Mobile overlay drawer (container + dialog) */
.wp-block-navigation__responsive-container,
.wp-block-navigation__responsive-dialog {
  background-color: var(--wp--custom--color--color-header-bg) !important;
}

/* 12. === Print safeguards === */
/* Avoid print problems from sticky header and double navigation */

@media print {

  /* Always show the desktop navigation and hide the mobile variant */
  .ibt-nav-dual .ibt-nav-desktop { display: block !important; }
  .ibt-nav-dual .ibt-nav-mobile  { display: none !important; }

  /* Disable sticky positioning for header and its template wrapper */
  .ibt-sticky,
  .wp-block-template-part:has(> .ibt-sticky) {
    position: static !important;
    top: auto !important;
  }
}



/* End IBT - Wordpress 6.8 helpers   
============================================================================================================== */


/* ===== DEV / TESTING =====
   Status & disabled colour utilities for quick visual checks.
   Safe to delete or comment out before production. */

/* Text colour only */
.ibt-status--success { color: var(--wp--custom--color--color-success); }
.ibt-status--warning { color: var(--wp--custom--color--color-warning); }
.ibt-status--error   { color: var(--wp--custom--color--color-error); }
.ibt-status--info    { color: var(--wp--custom--color--color-info); }

/* Background (tint) only */
.ibt-status-bg--success { background-color: var(--wp--custom--color--color-success-tint); }
.ibt-status-bg--warning { background-color: var(--wp--custom--color--color-warning-tint); }
.ibt-status-bg--error   { background-color: var(--wp--custom--color--color-error-tint); }
.ibt-status-bg--info    { background-color: var(--wp--custom--color--color-info-tint); }

/* Border colour only */
.ibt-status-border--success { border-color: var(--wp--custom--color--color-success); }
.ibt-status-border--warning { border-color: var(--wp--custom--color--color-warning); }
.ibt-status-border--error   { border-color: var(--wp--custom--color--color-error); }
.ibt-status-border--info    { border-color: var(--wp--custom--color--color-info); }

/* Simple notice pattern (padding + radius + border) */
.ibt-notice { padding: 0.75rem 1rem; border-radius: 8px; border: 1px solid transparent; }
.ibt-notice--success { background-color: var(--wp--custom--color--color-success-tint); border-color: var(--wp--custom--color--color-success); color: var(--wp--custom--color--color-success); }
.ibt-notice--warning { background-color: var(--wp--custom--color--color-warning-tint); border-color: var(--wp--custom--color--color-warning); color: var(--wp--custom--color--color-warning); }
.ibt-notice--error   { background-color: var(--wp--custom--color--color-error-tint);   border-color: var(--wp--custom--color--color-error);   color: var(--wp--custom--color--color-error); }
.ibt-notice--info    { background-color: var(--wp--custom--color--color-info-tint);    border-color: var(--wp--custom--color--color-info);    color: var(--wp--custom--color--color-info); }

/* ===== IBT Disabled Utilities =====
   Use these on any block to simulate a disabled/greyed state. */

.ibt-status--disabled        { color: var(--wp--custom--color--color-disabled); }
.ibt-status-bg--disabled     { background-color: var(--wp--custom--color--color-disabled-tint); }
.ibt-status-border--disabled { border-color: var(--wp--custom--color--color-disabled); }

/* Quick demo: greyed-out notice style */
.ibt-notice--disabled {
  background-color: var(--wp--custom--color--color-disabled-tint);
  border: 1px solid var(--wp--custom--color--color-disabled);
  color: var(--wp--custom--color--color-disabled);
}

/* *************************************************************************************************************
                                       END OF MINIMAL FRONT END STYLE SHEET
   ************************************************************************************************************* */
 
