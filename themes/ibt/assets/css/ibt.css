/* **********************************************************************
   IBT THEME CSS
   Structural helpers for things that don’t fit in theme.json or templates
   ********************************************************************** */

/* ---------INDEX ----------
   0. Theme documentation
   1. Typography & Base styles
   2. Buttons & Links - Common
   3. Header, Nav & Footer
   4. Layout / Spacing
   5. Utilities
   6. States & Media
   7. Dev Sandbox
   ------------------------ */

/* =====================================================================
             0 - Theme documentation and conventions
  =====================================================================
  
  Purpose:
  Keep all theme-level CSS predictable, token-driven, and accessible.
  Document design here in just enough detail for future maintenance
  without the overhead of separate documents. 

--------- 0.0 - CSS ADOPTION POLICY -------- 
Given IBT's older demographic site must operate for out of date browsers
but we do not want to limit styling for the majority of our audience. The
following pragmatic guidelines on UK CSS feature support apply as a guide.

Critical core: ≥ 99.8 % browser coverage.
  Site must fully function even with no advanced CSS.
  Avoid new syntax on a11y and basic site use features.

Nice-to-have layer: ≥ 95 % UK coverage. (e.g. :has(), :where() ) 
  Should degrade gracefully without support. 

Experimental (< 95 %) UK coverage: Not permitted.

   
--------- 0.1 - TOKEN & NAMING SYSTEM --------
   
WordPress tokens
  --wp--* ........................ Core WP presets
  .editor-styles-wrapper ......... Set formats specifically for site editor.

IBT custom tokens
  --color-* ...................... Semantic colour tokens (palette-agnostic)
  --ibt-adminbar-offset .......... Offset for WP admin bar
  --wp--custom--color--* ......... Private palette (as -color but not exposed to editor)
  --spacing-* .................... Spacing scale (rem-based or clamp)
  --transition-* ................. Motion timing (base, fast, slow) for easy tuning

--------- 0.2 - CLASS NAMING -----------

ROOT PADDING
  .ibt-rootp-apply ................ Add to outer groups to apply root padding.
  .ibt-rootp-bg-exempt ............ Background is not constrained with content box
HEADER
  .ibt-header ..................... Main header wrapper element.
  .ibt-header-icons ............... Wrapper for all header icon buttons.
  .ibt-header-inner ............... Constrains header inner width and applies root padding.
  .ibt-header-nav ................. Common styling for all navigation instances.
  .ibt-header-nav-desktop ......... Desktop navigation instance.
  .ibt-header-nav-dual ............ Wrapper combining both desktop and mobile nav blocks for breakpoint toggling.
  .ibt-header-nav-mobile .......... Mobile navigation instance.
  .ibt-header-row1 ................ First header row (utility row).
  .ibt-header-row2 ................ Second header row (navigation row).
  .ibt-header-search-button-wrap .. Search button wrapper (for consistent sizing with Woo icons).
  .ibt-header-search-field ........ Container for the search input.
  .ibt-header-search-toggle ....... Icon-only button that toggles search visibility.
  .ibt-header-search.is-open ...... State class applied to header when search field is active/open.
  .ibt-header-sticky .............. Makes the header sticky beneath the WP admin bar.
  .ibt-header-title-desktop ....... Row 1 site title — visible on desktop.
  .ibt-header-title-mobile ........ Row 2 site title — visible on mobile.
  .ibt-header-wooicons ............ Wrapper for WooCommerce header icons.

PREFOOTER
  .ibt-prefooter-card ............. Inline-block wrapper for pre-footer call-to-action card.
  .ibt-prefooter-inner ............ Centers pre-footer inner group content horizontally.

------------- 0.3 - STYLE PRINCIPLES ----------------------

• Header/footer constrained to 80 rem inner width (review later)
• Root padding uses clamp().
• Colour-agnostic design: only #000 / #fff should appear literal.
• All motion ease times use transition tokens.
• Tokens are mostly set in theme.json, reasons for exceptions in comments. This includes
  custom tokens --wp--custom--*
• :has() used for styling elements but not for critical functionality. (Support for v. old browsers.)  
• Typography and spacing use tokens or clamp() at larger sizes for responsive fluid scaling.
• Accessibility: AAA general target but safe AA acceptable if really needed.
• Basic keyboard nav tests during dev, full a11y checks before release


------------ 0.4 - COMMENT CONVENTION -------------------------

Each section comment should include:
  WHY – design intent for all sections / blocks (always)
  WHAT IT DOES – plain English for complex syntax (when needed)
  HOW TO MAINTAIN – notes for future (when needed)

Example: (+ == *)
  /+ Scale nav text to suit container width. 1cqw = 1% of nav container width.
    Note - Adjust slope if wrapping occurs in header desktop nav .+/
  font-size: clamp(1rem, 1cqw + 0.9rem, 1.25rem);


/* ======================================================================
   1. TYPOGRAPHY & BASE STYLES
   Basic styling that doesn't work in json yet
   ====================================================================== */

/* Define variables for use in all transitions. Not in theme.json because
   it doesn't support transitions yet. */
:root {
  --transition-base: 0.2s ease-in-out; /* Default */
  --transition-fast: 0.15s ease-out;   /* hover & micro-lift effects */
  --transition-slow: 0.3s ease;        /* larger fades / layout shifts */
}

/* Headings (per-level until WP adds theme.json support) */
h1 {font-size: var(--wp--preset--font-size--xxxl); font-weight: 700 ; padding-top: var(--wp--preset--spacing--xl) ; padding-bottom: var(--wp--preset--spacing--s);}
h2 {font-size: var(--wp--preset--font-size--xxl); font-weight: 600 ; padding-top: var(--wp--preset--spacing--l) ;}
h3 {font-size: var(--wp--preset--font-size--xl); font-weight: 600 ; padding-top: var(--wp--preset--spacing--m) ;}
h4 {font-size: var(--wp--preset--font-size--l); font-weight: 600 ; padding-top: var(--wp--preset--spacing--m) ;}
h5 {font-size: var(--wp--preset--font-size--m); font-weight: 600 ; padding-top: var(--wp--preset--spacing--s) ;}
h6 {font-size: var(--wp--preset--font-size--m); font-weight: 500 ; padding-top: var(--wp--preset--spacing--s) ;}

/* Provide theme style for <hr>, partially supported in json but doing all in one place is cleaner. */
hr,
.wp-block-separator {
  border: none;
  border-top: 1px solid var(--wp--custom--color--border-primary);
  margin-block: var(--wp--preset--spacing--m);
}

/* Provide basic neutral grey separator */
/* Can be set in theme.json but over-written because Gutenberg... */
.wp-block-separator,
.wp-block-separator.has-alpha-channel-opacity {
  border-top: 1px solid #d9d9d9;
  opacity: 1;
}


/* ======================================================================
   2. BUTTONS & LINKS
   Variants, hover/focus states, global link effects
   ======================================================================
   2.1 - Links
   2.2 - Buttons */

/* ------------------------- 2.1 - Links ------------------------------ */

/* Create an absolute position for all a (link) elements for visual effects */
a {
  position: relative;  
}

/* ----- Default text link -----
   Universal link styling. Excludes buttons, nav items, and heading links.
   Low specificity for overides as needed. */

/* Base state (low specificity via :where) */
:where(a[href]):not(:where(.wp-element-button, .wp-block-button__link, .button)):not(:where(nav *)) {
     text-decoration: underline ;
  transition:
    text-underline-offset var(--transition-slow),
    text-decoration-thickness var(--transition-slow);
}

/* Hover */
:where(a[href]):not(:where(.wp-element-button, .wp-block-button__link, .button)):not(:where(nav *)):hover {
  text-underline-offset: 0.2em;
  transition:
    text-underline-offset var(--transition-slow),
    text-decoration-thickness var(--transition-slow);
}

/* Visited */
:where(a[href]):not(:where(.wp-element-button, .wp-block-button__link, .button)):not(:where(nav *)):visited {
  color: inherit;
}


/* Heading links – lighter underline for posts and pages
   Note – excludes WooCommerce and Footer contexts,
   which are styled in their respective sections. 
   DEV - WOULD BENEFIT FROM ANOTHER PASS TO TRY TO ELIMNATE IMPORTANT but it works */
:where(.wp-block-post-title a):not(:where(.woocommerce *)):not(:where(.ibt-footer *)) {
  color: inherit;
  text-decoration: underline !important;     /* maintain specificity vs block defaults */
  text-decoration-thickness: 1px !important; /* maintain specificity vs block defaults */
  text-underline-offset: 0.15em;
  transition:
    text-underline-offset var(--transition-base),
    text-decoration-thickness var(--transition-base);
}

/* Post Title Link - Hover */
.wp-block-post-title a:hover {
  text-underline-offset: 0.25em;
  text-decoration-thickness: 2px !important; /* maintain specificity vs block defaults */
  transition:
    text-underline-offset var(--transition-base),
    text-decoration-thickness var(--transition-base);
}


/* ----- Image links ----- */

/* Prepare linked images for hover effects */
a > img {
  display: block;       /* Remove inline spacing; ensures predictable box behaviour */
  transition:           /* Animate only transform and filter (no opacity here) */
    transform var(--transition-fast),
    filter    var(--transition-fast);
}

/* Hover: gentle zoom and brightening */
a:hover img {
  transform: scale(1.003);    /* Slight zoom-in for tactile feel */
  filter: brightness(1.05);   /* Lift luminance slightly, no colour shift */
}

/* Edge-light overlay setup */
a:has(img)::after {
  content: "";                 /* Generate empty pseudo-element layer */
  position: absolute;          /* Position it relative to the link */
  inset: 0;                    /* Fill the entire link box */
  pointer-events: none;        /* Keep clicks/focus on the image/link itself */
  opacity: 0;                  /* Start invisible (fades in on hover) */
  transition: opacity var(--transition-base);  /* Fade speed for the overlay */
  background: radial-gradient( /* Create a soft radial light around edges */
    circle at center,
    rgba(255,255,255,0)   50%,  /* Transparent centre */
    rgba(255,255,255,0.22) 95%  /* Gentle edge highlight */
  );
  mix-blend-mode: screen;      /* Lighten only; preserve underlying detail */
}

/* Hover: reveal the overlay */
a:has(img):hover::after {
  opacity: 1;
}


/* ------ ICON BUTTONS ------ */
/* Add .ibt-icon-button class to buttons to use this hover rule */

.ibt-icon-button {
  display: inline-flex;                 /* Centre icon within box */
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: transform var(--transition-base);
}

/* Subtle scale-up on hover */
.ibt-icon-button:hover svg,
.ibt-icon-button:hover img {
  transform: scale(1.18);
}

/* Slight compress on press */
.ibt-icon-button:active svg,
.ibt-icon-button:active img {
  transform: scale(0.98);
}

/* ------------------------- 2.2 - Buttons ------------------------------ */

/* Core + WooCommerce buttons share base geometry */
.wp-element-button,
.wc-block-components-button,
.wc-block-components-product-button__button,
.single_add_to_cart_button,
.wc-block-cart__submit-button,
.wc-block-components-checkout-place-order-button {
  font-family: var(--wp--preset--font-family--title-font);
  font-weight: 600;
  border-radius: 8px;
  border-width: 2px;
  border-style: solid;
  min-height: 50px;
  padding: 0.75rem 1.25rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition:
    color var(--transition-base),
    background-color var(--transition-base),
    border-color var(--transition-base),
    box-shadow var(--transition-base),
    transform var(--transition-fast);
}

/* Hover micro-lift for all core + Woo buttons */
.wp-element-button:hover,
.wc-block-components-button:hover,
.wc-block-components-product-button__button:hover,
.single_add_to_cart_button:hover,
.wc-block-cart__submit-button:hover,
.wc-block-components-checkout-place-order-button:hover {
  transform: translateY(-1px);
}

/* Base elevation for all core + Woo buttons */
.wp-element-button,
.wc-block-components-button,
.wc-block-components-product-button__button,
.single_add_to_cart_button,
.wc-block-cart__submit-button,
.wc-block-components-checkout-place-order-button {
  box-shadow: var(--wp--preset--shadow--low);
}

/* Hover elevation for all core + Woo buttons */
.wp-element-button:hover,
.wc-block-components-button:hover,
.wc-block-components-product-button__button:hover,
.single_add_to_cart_button:hover,
.wc-block-cart__submit-button:hover,
.wc-block-components-checkout-place-order-button:hover {
  box-shadow: var(--wp--preset--shadow--medium);
  transform: translateY(-1px);
}

/* Pressed state for all core + Woo buttons */
.wp-element-button:active,
.wc-block-components-button:active,
.wc-block-components-product-button__button:active,
.single_add_to_cart_button:active,
.wc-block-cart__submit-button:active,
.wc-block-components-checkout-place-order-button:active {
  box-shadow: var(--wp--preset--shadow--sunken);
  transform: translateY(0);
}

/* Disabled state for all core + Woo buttons */
.wp-element-button:disabled,
.wp-element-button[aria-disabled="true"],
.wc-block-components-button:disabled,
.wc-block-components-product-button__button:disabled,
.single_add_to_cart_button:disabled,
.wc-block-cart__submit-button:disabled,
.wc-block-components-checkout-place-order-button:disabled {
  box-shadow: none;
  transform: none;
  cursor: not-allowed;
  pointer-events: none;
}

/* ----- Base Colours ----- */

/* Primary Solid */
.wp-block-button.is-style-primary-solid .wp-element-button {
  background-color: var(--wp--custom--color--color-primary);
  color: #fff;
  border: 2px solid color-mix(in srgb, var(--wp--custom--color--color-primary) 85%, black 15%);
}

/* Primary Outline */
.wp-block-button.is-style-primary-outline .wp-element-button {
  background-color: color-mix(in srgb, white 50%, transparent);
  color: var(--wp--custom--color--color-primary);
  border: 2px solid var(--wp--custom--color--color-primary);
}

/* Buy Solid - includes primary Woo 10.3 buttons */
.wp-block-button.is-style-buy-solid .wp-element-button,
.single_add_to_cart_button,
.wc-block-cart__submit-button,
.wc-block-components-checkout-place-order-button,
.wc-block-components-product-button__button,
.wc-block-components-button.contained,
.wc-block-mini-cart__footer-checkout {
  background-color: var(--wp--custom--color--color-secondary);
  color: #fff;
  border: 2px solid color-mix(in srgb, var(--wp--custom--color--color-secondary) 85%, black 15%);
}

/* Buy Outline - includes Woo 10.3 secondary buttons */
.wp-block-button.is-style-buy-outline .wp-element-button,
.wc-block-components-button.outlined,
.wc-block-mini-cart__footer-cart,
.wc-block-cart__submit-button--secondary {
  background-color: color-mix(in srgb, white 50%, transparent);
  color: var(--wp--custom--color--color-secondary);
  border: 2px solid var(--wp--custom--color--color-secondary);
}

/* ----- Hover + Active ----- */

/* Primary Solid */
.wp-block-button.is-style-primary-solid .wp-element-button:hover {
  background-color: var(--wp--custom--color--color-primary-hover);
  border-color: color-mix(in srgb, var(--wp--custom--color--color-primary-hover) 70%, black 30%);
}
.wp-block-button.is-style-primary-solid .wp-element-button:active {
  background-color: color-mix(in srgb, var(--wp--custom--color--color-primary-hover) 90%, black 10%);
  border-color: color-mix(in srgb, var(--wp--custom--color--color-primary-hover) 70%, black 35%);
}

/* Primary Outline - includes Woo 10.3 secondary buttons */
.wp-block-button.is-style-buy-outline .wp-element-button:hover,
.wc-block-components-button.outlined:hover,
.wc-block-mini-cart__footer-cart:hover,
.wc-block-cart__submit-button--secondary:hover {
  background-color: color-mix(in srgb, white 88%, transparent);
  border-color: var(--wp--custom--color--color-primary-hover);
  color: var(--wp--custom--color--color-primary-hover);
}
.wp-block-button.is-style-buy-outline .wp-element-button:active,
.wc-block-components-button.outlined:active,
.wc-block-mini-cart__footer-cart:active,
.wc-block-cart__submit-button--secondary:active {
  background-color: color-mix(in srgb, white 80%, transparent);
  border-color: color-mix(in srgb, var(--wp--custom--color--color-primary-hover) 80%, black 20%);
}

/* Buy Solid - inlcudes Woo 10.3 primary buttons */
.wp-block-button.is-style-buy-solid .wp-element-button:hover,
.single_add_to_cart_button:hover,
.wc-block-cart__submit-button:hover,
.wc-block-components-checkout-place-order-button:hover,
.wc-block-components-product-button__button:hover,
.wc-block-components-button.contained:hover,
.wc-block-mini-cart__footer-checkout:hover {
  background-color: var(--wp--custom--color--color-secondary-hover);
  border-color: color-mix(in srgb, var(--wp--custom--color--color-secondary-hover) 70%, black 30%);
}
.wp-block-button.is-style-buy-solid .wp-element-button:active,
.single_add_to_cart_button:active,
.wc-block-cart__submit-button:active,
.wc-block-components-checkout-place-order-button:active,
.wc-block-components-product-button__button:active,
.wc-block-components-button.contained:active,
.wc-block-mini-cart__footer-checkout:active {
  background-color: color-mix(in srgb, var(--wp--custom--color--color-secondary-hover) 90%, black 10%);
  border-color: color-mix(in srgb, var(--wp--custom--color--color-secondary-hover) 70%, black 35%);
}

/* Buy Outline */
.wp-block-button.is-style-buy-outline .wp-element-button:hover {
  background-color: color-mix(in srgb, white 88%, transparent);
  border-color: var(--wp--custom--color--color-secondary-hover);
  color: var(--wp--custom--color--color-secondary-hover);
}
.wp-block-button.is-style-buy-outline .wp-element-button:active {
  background-color: color-mix(in srgb, white 80%, transparent);
  border-color: color-mix(in srgb, var(--wp--custom--color--color-secondary-hover) 80%, black 20%);
}

/* ----- Disabled States ----- */

/* Applies to all variants, including simulated (aria-disabled) */
.wp-element-button:disabled,
.wp-element-button[aria-disabled="true"] {
  opacity: 0.6;
  box-shadow: none;
  cursor: not-allowed;
  pointer-events: none;
  transform: none;
}

/* --------- 2.3 Focus Visible default -------- */

/* Unique and good contrast on Paper and dark surfaces */
:focus-visible {
  outline: 2px solid #275A3D; 
  outline-offset: 2px;
}

/* Suppress duplicate outlines on elements that already have visible rings */
button:focus-visible,
[role="button"]:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
  outline-offset: 3px; /* small buffer from native borders */
}

/* ----------------------------------------------------------------------
   3. HEADER, NAV & FOOTER
   Sticky header, navigation, utility icons, search
   ---------------------------------------------------------------------- */


/* ---------- 3.1 – Sticky Header ---------- */
/* Admin bar offset */
:root { --ibt-adminbar-offset: 0px; }               /* No admin bar */
.admin-bar { --ibt-adminbar-offset: 32px; }         /* WP desktop admin bar */

@media (max-width: 782px) {
  .admin-bar { --ibt-adminbar-offset: 46px; }       /* WP “mobile” admin bar */
}

/* Sticky header enabled only on viewports ≥ 500px */
@media (min-height: 500px) {

  .ibt-header-sticky,
  .wp-block-template-part:has(> .ibt-header-sticky) {
    position: sticky;
    top: var(--ibt-adminbar-offset);
    z-index: 50;
  }

  .wp-block-template-part:has(> .ibt-header-sticky) { z-index: 49; } /* wrapper sits under header */

}


/* ----------  3.2 – Header Base Layout ---------- */

/* ----- 3.2.A — Header container ----- */

.ibt-header {
  background-color: var(--wp--custom--color--color-header-bg);
  color: var(--wp--preset--color--emphasis-primary);
}

.ibt-header-inner {
  box-sizing: border-box;
  max-width: var(--wp--style--global--wide-size);
  margin-inline: auto;
  padding-block: 0;
  display: flex;
  flex-wrap: nowrap;
  justify-content: space-between;
  align-items: flex-end;
  padding-top: 15px;                     /* Add a little space above card index nav */
}

/* -----3.2.B — Logo ----- */

.ibt-header-logo img {
  height: 40px;                           /* fixed desktop/mobile height */
  width: calc(40px * 3.57);               /* maintain native aspect ratio */
  object-fit: contain;                    /* avoid distortion */
  display: block;                         /* removes inline-gap artefacts */
}

.ibt-header-logo { align-self: center; }  /* Centre logo vertically */

/* ----- 3.2.C — Utility Icons (search, account, cart) ----- */

/* Consistent 44px tap-targets for all header icons */
.ibt-icon-button {
  width: 44px;
  height: 44px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 2px solid transparent;
  border-radius: 6px;
  background: none;
  padding: 0;
  margin: 0;
  color: var(--wp--preset--color--emphasis-primary);
  cursor: pointer;
  transition: color var(--transition-base), border-color var(--transition-base);
}

.ibt-icon-button svg {
  width: 24px;
  height: 24px;
  display: block;
  pointer-events: none;
}

/* Hover / focus style (light touch, consistent with nav tabs) */
.ibt-icon-button:hover,
.ibt-icon-button:focus-visible {
  border-color: var(--color-header-tab-border);
  color: black;
}

/* WooCommerce mini-cart badge */
.wc-block-mini-cart__badge {
  background-color: var(--wp--preset--color--emphasis-secondary);
  color: #fff;
}

/* Reset default WP button styles for search inner button */
.ibt-header-search-toggle {
  background-color: transparent !important;
  border-color: transparent !important;
  box-shadow: none !important;
}

/* ---------- 3.3 – Header Search ---------- */

/* No current css */

/* ---------- 3.4 – Desktop Navigation (Card-index style) ---------- */

/* ----- 3.4.A — Desktop navigation layout & tap targets ----- */
/* Keep nav horizontal, no wrapping, bottom-aligned for card-index tabs. */

.ibt-header-nav-desktop .wp-block-navigation__container {
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  align-items: center;
}

/* Ensure all clickable nav items meet AAA vertical size and align bottom */
.ibt-header-nav-desktop .wp-block-navigation__container
  .wp-block-navigation-item__content,
.ibt-header-nav-desktop .wp-block-navigation__submenu-container
  .wp-block-navigation-item__content {
  display: flex;
  align-items: center;
  line-height: 1.2;
  min-height: 48px; /* AAA target */
  padding-top: 0;
  padding-bottom: 0;
}

/* Equal horizontal padding for top-level + submenu items */
.ibt-header-nav-desktop :is(
  a.wp-block-navigation-item__content,
  button.wp-block-navigation-item__content,
  button.wp-block-navigation-submenu__toggle,
  button.wp-block-navigation-item__content.wp-block-navigation-submenu__toggle
) {
    padding-left:  clamp(2px, 1.333vw - 8.666px, 15px);
    padding-right: clamp(2px, 1.333vw - 8.666px, 15px);
}

/* Compact gap between tabs, and pull items down by 2px to sit on header base */
.ibt-header-nav-desktop {
  display: flex;        /* ensures tab strip keeps full row behaviour */
  gap: clamp(1px, 0.666vw - 4.333px, 4px);
  margin-bottom: -2px;  /* anchors card-index tabs visually */
}


/* ----- 3.4.B — Desktop nav typography ----- */

/* Smooth scaling, semi-bold, small positive tracking */
.ibt-header-nav-desktop .wp-block-navigation-item__content {
  font-size: clamp(14px, 1.5vw + 4px, 22px);
  line-height: 1.4;
  letter-spacing: 0.01em;
  font-weight: 600;
}

/* ----- 3.4.C Borders and default state -----
   Prepare for tab-index styling (3.4 d). */

/* Local test palette (override later with theme tokens) */
.ibt-header-nav-desktop {
  --color-header-tab-default:  #DCD6CF;  /* inactive / neutral tab */
  --color-header-tab-related:  #EBE8E3;  /* ancestor / section parent */
  --color-header-tab-active:   #FAF9F7;  /* current page */
  --color-header-tab-hover:    #FAF9F7;  /* hover state */
  --color-header-tab-border:   #4A443E;  /* strong border */
  --color-header-tab-soft:     #8D8780;  /* subtle default border */
}

/* Base tab styling — top level only */
.ibt-header-nav-desktop > ul > li > a.wp-block-navigation-item__content,
.ibt-header-nav-desktop > ul > li > button.wp-block-navigation-item__content {
  border: 1px solid var(--color-header-tab-soft);
  border-bottom: none;                 /* card-index illusion */
  border-radius: 6px 6px 0 0;          /* top-only rounding */
  background-color: var(--color-header-tab-default);
  transition: border-color var(--transition-base),
              color var(--transition-base),
              background-color var(--transition-base);
}

/* Default / Inactive state overrides */
.ibt-header-nav-desktop .wp-block-navigation-item__content {
  color: var(--wp--preset--color--emphasis-primary); /* text remains standard */
  /* background + border defined in C-1 */
}

/* ----- Top Level Menu Highlighting ----- */

/* Active tab (exact page match) */
.ibt-header-nav-desktop
  > ul > li > a.wp-block-navigation-item__content[data-ibt-state="active"] {
  background-color: var(--color-header-tab-active);
  border-color: var(--color-header-tab-border);
  color: black;
}

/* Ancestor tab (section parent) */
.ibt-header-nav-desktop
  > ul > li > a.wp-block-navigation-item__content[data-ibt-state="ancestor"] {
  background-color: var(--color-header-tab-related);
  border-color: var(--color-header-tab-border);
  color: black;
}

/* Top-level submenu parent highlight */
.ibt-header-nav-desktop
  > ul > li[data-ibt-state="ancestor"]
  > button.wp-block-navigation-item__content {
  background-color: var(--color-header-tab-related);
  border-color: var(--color-header-tab-border);
  color: black;
}

/* ----- Hover ----- */

/* Hover state (all tabs) */
.ibt-header-nav-desktop a.wp-block-navigation-item__content:hover,
.ibt-header-nav-desktop button.wp-block-navigation-item__content:hover {
  background-color: var(--color-header-tab-hover) !important;
  border-color: var(--color-header-tab-border) !important;
  color: black;
}

/* ----- 3.4.D - Submenu ----- */

/* Container */
.ibt-header-nav-desktop .wp-block-navigation__submenu-container {
  background-color: var(--color-header-tab-default);
  border: 1px solid var(--color-header-tab-soft) !important;
  border-top: none;                     /* attaches to parent tab */
  border-bottom: none;                  /* double border with items */
  margin-top: -1px;                     /* fixes seam under tab */
  overflow: visible;                    /* safari fix */
  z-index: 60;                          /* required */
  position: relative;
}

/* Sub menu items */
.ibt-header-nav-desktop
  .wp-block-navigation__submenu-container
  li > a.wp-block-navigation-item__content {

  background-color: var(--color-header-tab-default);
  color: var(--wp--preset--color--emphasis-primary);
  border: none;
  border-bottom: 1px solid var(--color-header-tab-soft);
  border-radius: 0;
  padding-top: 0;
  padding-bottom: 0;
  transition: border-color var(--transition-base),
              color var(--transition-base),
              background-color var(--transition-base);
}

/* Remove automatic ▼ icon from desktop nav items to avoid styling problems.*/
.ibt-header-nav-desktop .wp-block-navigation__submenu-icon {
  display: none !important;
}

/* Default visibility — desktop nav active, mobile turned off */
.ibt-header-nav-desktop { display: block; }
.ibt-header-nav-mobile  { display: none; }


/* ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
   3.5 – Mobile Navigation
   ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ */

/* Collapse all submenus by default and only reveal those opened by WordPress. */
.ibt-header-nav-mobile .wp-block-navigation__responsive-container.is-menu-open
  .wp-block-navigation__submenu-container {
  display: none;
}

.ibt-header-nav-mobile .wp-block-navigation__submenu-container.is-open,
.ibt-header-nav-mobile .wp-block-navigation-submenu__toggle[aria-expanded="true"]
  + .wp-block-navigation__submenu-container,
.ibt-header-nav-mobile .wp-block-navigation-submenu__toggle[aria-expanded="true"]
  ~ .wp-block-navigation__submenu-container {
  display: block;
}

/* Add padding inside the mobile overlay when menu is open. */
.ibt-header-nav-mobile
  :is(.wp-block-navigation__responsive-container,
      .wp-block-navigation__responsive-dialog).is-menu-open
  .wp-block-navigation__responsive-container-content {
  padding: 1.5rem;
}

/* Add equal padding to all mobile menu items. */
.ibt-header-nav-mobile
  :is(a.wp-block-navigation-item__content,
      button.wp-block-navigation-submenu__toggle) {
  padding-left: 1rem !important;
  padding-right: 1rem !important;
}

/* Ensure open and close buttons meet AAA tap target and visual feedback. */
.ibt-header-nav-mobile
  :is(.wp-block-navigation__responsive-container-open,
      .wp-block-navigation__responsive-container-close) {
  min-width: 49px;
  min-height: 49px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 2px solid transparent;
  border-radius: 6px;
  color: var(--wp--preset--color--emphasis-primary);
  cursor: pointer;
  transition: color var(--transition-base),
              border-color var(--transition-base);
}

/* Ensure mobile nav items meet AAA tap-target size and stay vertically centred. */
.ibt-header-nav-mobile
  :is(.wp-block-navigation__container a.wp-block-navigation-item__content,
      .wp-block-navigation__container button.wp-block-navigation-item__content,
      .wp-block-navigation__submenu-container a.wp-block-navigation-item__content,
      .wp-block-navigation__submenu-container button.wp-block-navigation-item__content) {
  min-height: 48px;
  display: flex;
  align-items: center;
}

/* Match overlay background to header background colour. */
.wp-block-navigation__responsive-container,
.wp-block-navigation__responsive-dialog {
  background-color: var(--wp--custom--color--color-header-bg) !important;
}


/* ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
   3.6 – Responsive Breakpoints
   ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ */

/* Desktop: ≥800px */
@media (min-width: 800px) {
  header .ibt-header-nav-mobile { display: none !important; }
  header .ibt-header-nav-desktop { display: flex !important; }
}

/* Mobile: ≤799px */
@media (max-width: 799px) {
  header .ibt-header-nav-desktop { display: none !important; }
  header .ibt-header-nav-mobile { display: block !important; }
}


/* ----------------------------------------------------------------------
   3.6 – Footer
   ---------------------------------------------------------------------- */

/* ---------- Base format - all versions --------- */

/* --- Base spacing --- */

/* Set small default <p> spacing */
.ibt-footer p {
    margin: 0;
    padding-top: var(--wp--preset--spacing--xxs);
    padding-bottom: var(--wp--preset--spacing--xxs);
}

/* --- Base formatting --- */

/* Outer wrapper */
.ibt-footer {
    background: var(--wp--custom--color--color-footer-bg);
    border-top: 1px solid var(--wp--custom--color--color-footer-border);
    padding-top:  var(--wp--preset--spacing--s);
    padding-bottom:  var(--wp--preset--spacing--xs);
}

/* Everything in footer uses the title font */
.ibt-footer p,
.ibt-footer a,
.ibt-footer span,
.ibt-footer li {
    font-family: var(--wp--preset--font-family--title-font);
    line-height: 1.4;
}

/* Legal + copyright = small */
.ibt-footer-legal,
.ibt-footer-copyright {
    font-size: var(--wp--preset--font-size--s);
}

/* --- Social Icons --- */

/* Give icons same space as <p> */
.ibt-footer-social-icons {
  padding-top: var(--wp--preset--spacing--xxs);
  padding-bottom: var(--wp--preset--spacing--xxs);
}

/* Smooth animations for all social-hover effects incl WP default */
.ibt-footer-social-icons > li {
    transition: all var(--transition-fast, 0.2s ease-in-out) ;
}

/* IBT brand colour by default; reveal bright social brand colours only on hover */
.ibt-footer-social-icons > li:not(:hover) {
    background-color: var(--wp--custom--color--color-footer-text);
}

/* ---------- Desktop version --------- */

@media (min-width: 1200px) {

    /* Hide fields which are not required for desktop view */
    .ibt-footer-tel-c2,
    .ibt-footer-email-c2,
    .ibt-footer-contact-tablet,
    .ibt-footer-contact-mobile,
    .ibt-footer-backtotop-c4 {
        display: none !important;
    }

    /* Convert footer columns into a predictable flex row */
    .ibt-footer .wp-block-columns {
        display: flex !important;
        flex-wrap: nowrap !important;
        align-items: flex-start;
        justify-content: flex-start;
        gap: var(--wp--preset--spacing--s); /* override Gutenberg block-gap */
    }

    /* Column 1 – Logo (fixed width) */
    .ibt-footer-col-1 {
        flex: 0 0 180px !important;
    }

    /* Column 4 – Social + legal (fixed width) */
    .ibt-footer-col-4 {
        flex: 0 0 280px !important;
    }

    /* Columns 2 & 3 – Flexible equal-width middle columns */
    .ibt-footer-col-2,
    .ibt-footer-col-3 {
        flex: 1 1 0 !important;
        min-width: 0; /* prevents content forcing overflow */
    }

    /* Column 2 left padding so text doesn't collide with logo */
    .ibt-footer-col-2 {
        padding-left: var(--wp--preset--spacing--s) ;
    }

    /* Desktop – add small breathing room around the Contact Us block to balance columns */
    .ibt-footer-col-3 .wp-block-buttons.ibt-footer-contact-us {
        margin-top: var(--wp--preset--spacing--xs);
        margin-bottom: var(--wp--preset--spacing--xs);
    }
}

/* ---------- Tablet version --------- */

@media (min-width: 799px) and (max-width: 1199px) {

    /* Hide Column 3 entirely for tablet */
    .ibt-footer-col-3 {
        display: none !important;
    }

    /* Hide desktop + mobile items */
    .ibt-footer-contact-desktop,
    .ibt-footer-contact-mobile,
    .ibt-footer-backtotop-c3,
    .ibt-footer-backtotop-c4  {
        display: none !important;
    }

    /* Show tablet variants + duplicates needed on tablet */
    .ibt-footer-tel-c2,
    .ibt-footer-email-c2,
    .ibt-footer-contact-tablet {
        display: block !important;
    }

    /* Convert footer to 3-column flex layout (1,2,4) */
    .ibt-footer .wp-block-columns {
        display: flex !important;
        flex-wrap: nowrap !important;
        align-items: flex-start;
        justify-content: flex-start;
        gap: var(--wp--preset--spacing--s);
    }

    /* Column 1 – Logo (same fixed width as desktop) */
    .ibt-footer-col-1 {
        flex: 0 0 180px !important;
    }

    /* Column 4 – Social + legal (fluid width 200px → 280px) */
    .ibt-footer-col-4 {
        flex: 0 0 clamp(200px, calc(20vw + 40px), 280px) !important;
    }

    /* Column 2 – Only flexible middle column on tablet */
    .ibt-footer-col-2 {
        flex: 1 1 0 !important;
        min-width: 0; /* prevents content forcing overflow */
        padding-left: var(--wp--preset--spacing--s) ;
    }

    /* Tablet – add breathing room around tablet Contact Us block */
    .ibt-footer-col-4 .wp-block-buttons.ibt-footer-contact-us {
        margin-top: var(--wp--preset--spacing--s) ;
        margin-bottom: var(--wp--preset--spacing--s);
    }
}

/* ---------- Mobile version --------- */
@media (max-width: 798px) {

    /* Stack columns */
    .ibt-footer .wp-block-columns {
        display: block !important;
        flex-wrap: unset !important;
        gap: 0 !important;
    }

    /* All columns take full width (before hiding) */
    .ibt-footer-col-1,
    .ibt-footer-col-2,
    .ibt-footer-col-3,
    .ibt-footer-col-4 {
        width: 100% !important;
        flex: none !important;
    }

    /* ------------ HIDE unwanted content ------------ */

    /* Hide entire Column 2 (address, charity, dup contact) */
    .ibt-footer-col-2 {
        display: none !important;
    }

    /* Hide entire Column 3 (desktop contact block, dup contact, back to top) */
    .ibt-footer-col-3 {
        display: none !important;
    }

    /* Hide desktop/tablet CTAs */
    .ibt-footer-contact-desktop,
    .ibt-footer-contact-tablet {
        display: none !important;
    }

    /* Hide tel/email */
    .ibt-footer-tel-c2,
    .ibt-footer-email-c2,
    .ibt-footer-tel-c3,
    .ibt-footer-email-c3 {
        display: none !important;
    }

    /* --- SHOW desired mobile items --- */

    /* Mobile Contact Us button */
    .ibt-footer-contact-mobile {
        display: block !important;
    }

    /* Back to top (Column 4 version) */
    .ibt-footer-backtotop-c4 {
        display: block !important;
    }

    /* Reduce logo size and centre it */
    .ibt-footer-col-1 img {
        max-width: 130px !important;
    }
    .ibt-footer-col-1 {
        text-align: center !important;
    }

    /* Centre all column 4 content */
    .ibt-footer-col-4 {
        text-align: center !important;
    }

    /* Centre buttons (Gutenberg buttons are flex containers) */
    .ibt-footer-col-4 .wp-block-buttons {
        justify-content: center !important;
    }

    /* Convert socials from space-between to sensible gap */
    .ibt-footer-social-icons {
        justify-content: center ;
        gap: var(--wp--preset--spacing--s) ;
    }

    /* Add small breathing room around the Contact Us block */
    .ibt-footer-col-4 .wp-block-buttons.ibt-footer-contact-us {
        margin-top: var(--wp--preset--spacing--s) ;
        margin-bottom: var(--wp--preset--spacing--s) ;
    }
}


/* ======================================================================
   4. LAYOUT / SPACING
   Root padding and group / wide constraints
   ====================================================================== */

/* ---------------------------------------------------------------------
   4.0 Ensure minimum page height so footer does not float up page
   Applies to all pages.

   Note - Scroll bar visible when WP admin bar is visible. Can be 
   eliminated but doesn't show for users so kept it simple.
   -------------------------------------------------------------------- */

.wp-site-blocks {
  min-height: 100vh;
	display: flex;
	flex-direction: column;
}

.wp-site-blocks > main {
	flex: 1;
}


/* ---------------------------------------------------------------------
   4.1 Root Padding System
  
   WordPress core "root-padding" is unpredictable, varies by context,
   and conflicts with nested Group block padding. This system replaces
   it with a single class-based model that applies theme-wide spacing
   in a predictable, token-driven way.

   How it works:
   • Resets all Group block padding to 0 using :where() for zero specificity.
     Removes most WP default padding (& any from theme.json) but editor padding survives.
   • Applies fluid root padding via theme.json token to any wrapper using .ibt-rootp-apply.
   • Ensures backgrounds stop cleanly at the content rail unless .alignfull is used.

   Notes:
   • Adjust the clamp() value in theme.json → layout.root-padding to change spacing globally.
   • Add .ibt-rootp-apply to any outer wrapper (e.g. <main>) to apply global rails.
   • Manual group padding is generally not required in editor but can be used if needed. */

/* Reset Group block padding (neutral base) */
:where(.wp-block-group) {
  padding: 0;
}

/* Apply theme root padding on outer wrappers */
.ibt-rootp-apply {
  padding-inline: var(--wp--custom--layout--root-padding);
}

/* Constrain inner groups to content rail unless .alignfull or .ibt-rootp-bg-exempt */
.ibt-rootp-apply > :not(.alignfull):not(.ibt-rootp-bg-exempt) {
  box-sizing: content-box;
}

/* ---------------------------------------------------------------------
    4.1A - Pagination tap targets (core queries + WooCommerce).

   Note – vertical size is biased larger (AAA) as space allows;
   horizontal size is capped (AA) to avoid excess wrapping on 
   dense pagination. 
   ---------------------------------------------------------------------*/
.wp-block-query-pagination a,
.wp-block-query-pagination span,
.woocommerce-pagination .page-numbers a,
.woocommerce-pagination .page-numbers span {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	min-height: 44px;
	min-width: 24px;
	padding: 0.2em; /* Small horizontal and vertical breething room */
}


/* ---------------------------------------------------------------------
    4.2 - SINGLE POST WITH SIDEBAR

single.html
   • One-article layout with optional right sidebar.
   • Sidebar (<aside>) lives inside second column (.ibt-sideb-sideb).
   • Sticky CTAs use .ibt-sideb-sticky (position: sticky; top: 50vh).
   • Mobile bar <aside.ibt-sideb-mobile> shown ≤50rem; desktop hidden.
   • Outer <main> uses .ibt-rootp-apply for global root padding. 
   
Purpose:
   Manage two-column post layouts with an optional sidebar and mobile CTA bar.

   Desktop (>60rem)
   • Two columns (5/8 content, 3/8 sidebar)
   • Equal-height columns via flex stretch
   • Sticky CTA (.ibt-sideb-sticky) ensures visible sidebar content
   • Mobile bottom bar (.ibt-sideb-mobile) hidden

   Mobile (≤60rem)
   • Sidebar hidden, bottom bar shown
   • Content column expands to full width

   Editor
   • Both sidebar and bottom bar visible for editing convenience */

   /* ******************************************************************
                DEV REQUIRED – Future Semantic Enhancement
  
   Once single.html and sidebar templates are stable:
   • Move HTML semantics (role="complementary", aria-label="Sidebar")
     into PHP via render_block filter.
   • Implement in theme /inc/semantics.php and include from functions.php.
   • Purpose: preserve <div> for Gutenberg editor compatibility while
     providing <aside>-equivalent semantics on front-end render only.
   ********************************************************************* */

/* Columns container (main + sidebar) */
.ibt-sideb-columns {
  display: flex;
  align-items: stretch;                           /* equal column heights */
  gap: var(--wp--preset--spacing--l);
  max-width: var(--wp--style--global--wide-size);
  margin-inline: auto;

  /* Ratio + guards (variable defs) */
  --_gap: var(--wp--preset--spacing--l);
  --_content-ratio: 0.625;                        /* 5/8 */
  --_sidebar-ratio: 0.375;                        /* 3/8 */
  --_content-max: var(--wp--custom--sideb--size-content, 50rem);
  --_content-min: 33rem;                          /* readable floor */
  --_sidebar-min: 20rem;                          /* usable product-card floor */
}

/* Simple neutral grey background */
.ibt-sideb-sideb.ibt-rootp-bg-exempt {
  background-color: #f6f6f6; /* revert to solid colour */
  border-left: 1px solid var(--wp--preset--color--border-dark, #999);
  border-right: 1px solid var(--wp--preset--color--border-dark, #999);
}

/* Main content column (clamped by ratio + guards) */
.ibt-sideb-columns .ibt-sideb-content {
  flex: 0 0 clamp(
    var(--_content-min),
    calc(var(--_content-ratio) * (100% - var(--_gap))),
    var(--_content-max)
  ) !important;
  max-width: clamp(
    var(--_content-min),
    calc(var(--_content-ratio) * (100% - var(--_gap))),
    var(--_content-max)
  ) !important;
  display: flex;
  flex-direction: column;
}

/* Sidebar column (clamped by ratio + min)
   Flex layout keeps spacers and stacking natural. */
.ibt-sideb-sideb {
  flex: 1 1 clamp(
    var(--_sidebar-min),
    calc(var(--_sidebar-ratio) * (100% - var(--_gap))),
    calc(100% - var(--_content-min) - var(--_gap))
  );
  min-width: var(--_sidebar-min);
  padding-left: var(--wp--custom--layout--root-padding);
  display: flex;
  flex-direction: column;

  /* footer clearance */
  margin-bottom: var(--wp--preset--spacing--xl);
}

/* Sticky CTA: opt-in via .ibt-sideb-sticky */
.ibt-sideb-sideb .ibt-sideb-sticky {
  position: sticky;
  top: 50vh;                                      /* mid-viewport feel */
  align-self: flex-start;
}

/* ----- Responsive Sidebar Adaption ----- */

/* Default desktop/tablet */
.ibt-sideb-mobile { display: none; }

/* Collapse to mobile layout */
@media (max-width: 60rem) {
  .ibt-sideb-sideb { display: none; }  /* hide sidebar */
  .ibt-sideb-mobile { display: block; } /* show mobile bottom bar */

  /* Content goes full width */
  .ibt-sideb-columns .ibt-sideb-content {
    flex: 1 1 100% !important;
    max-width: 100% !important;
  }
}

/* ibt-editor.css makes both desktop and mobile vestions visible in editor only */


/* ---------------------------------------------------------------------
                      4.3 - EVENT FORMATTING
  ---------------------------------------------------------------------- */

/* ----- 4.3.1 EVENT MULTIPLE VIEWS -----*/

/* Highlight event-online */
.ibt-event-field--ibt-event-online {
  font-weight: 700;
  color: var(--wp--preset--color--emphasis-accent);
  font-family: var(--wp--preset--font-family--heading);
}

/* ----- 4.3.2 EVENT ARCHIVE -----*/

/* Base Reset */
.ibt-events-archive,
.ibt-events-archive * {
  margin: 0;
  padding: 0;
  gap: 0;
  list-style: none;
}
.ibt-events-archive {--wp--style--block-gap: 0;}

/* Title/toggle row */
.ibt-archive-header {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: center;
  gap: var(--wp--preset--spacing--s);
  padding-top: var(--wp--preset--spacing--l);
  padding-bottom: var(--wp--preset--spacing--m);
}

/* Fix width for toggle button */
.ibt-event-toggle-btn {width: 15rem;}

/* 2/3 width <hr> */
.ibt-events-archive hr {
  width: clamp(12rem, 66%, 53rem);
  margin-inline: auto;
  margin-block: var(--wp--preset--spacing--s);
  border: none;
  border-top: 2px solid var(--wp--preset--color--border-dark, #999);
}

/* Event heading to H3 size (semantically H2) */
.ibt-event-title { font-size: var(--wp--preset--font-size--xl);}

/* Paragraph fields and excerpts - tight spacing*/
.ibt-event-list-item p { padding-block: 0.3rem;}

/* ----- 4.3.2 EVENT ARCHIVE -----*/

/* Bigger font for event-online to make it stand out */
.single-ibt_event .ibt-event-field--ibt-event-online {
  font-size: var(--wp--preset--font-size--l);
}

/* Tighten spacing between Venue name and address */
.single-ibt_event .ibt-event-field--ibt-event-venue-name p {
  margin-bottom: 0;
  padding-bottom: 0;
}
.single-ibt_event .ibt-event-field--ibt-event-venue-address p {
  margin-top: 0;
  padding-top: 0;
}

/* ----- Event List (shortcode) ----- */
/* Scoped to .ibt-events-list-shortcode only */

/* Spacing reset for tight layout */
.ibt-events-list-shortcode,
.ibt-events-list-shortcode * {
  margin: 0;
  padding: 0;
  gap: 0;
  list-style: none;
}

/* Individual event titles (h3) — theme L size */
.ibt-events-list-shortcode .ibt-event-title {
  font-size: var(--wp--preset--font-size--l);
  margin-top: var(--wp--preset--spacing--s);
}

/* Card-style frame around the entire list */
.ibt-events-list-shortcode {
  border: 1px solid var(--wp--preset--color--border-dark, #999);
  border-radius: var(--wp--preset--spacing--xs);
  padding: var(--wp--preset--spacing--m);
  background-color: var(--wp--preset--color--surface, #fff);
  margin-block: var(--wp--preset--spacing--m);
}


/* ---------------------------------------------------------------------
                4.4 - SEARCH RESULT FORMATTING
  ---------------------------------------------------------------------- */

/* Give search form breathing room before results */
.ibt-search-form {
	margin-bottom: var(--wp--preset--spacing--l);
}

/* Search result type badge */
.ibt-search-type-label {
  text-align: center;
  padding: var(--wp--preset--spacing--l) 0 !important;
  margin: 0; /* remove default heading margin */
  line-height: 1.2;
}

/* Search result type column */
.ibt-search-badge-column {
  background: var(--wp--preset--color--alt-background);
  border: 1px solid var(--wp--preset--color--border-dark);
  border-radius: 10px;
}

/* Convert badge to header on mobile */
@media (max-width: 782px) {
  .ibt-search-badge-column {
    background: var(--wp--preset--color--background);
    border: none; 
    border-top: 2px solid var(--wp--preset--color--border-dark);
    border-radius: 0;
    margin-bottom: 0;
  }
  .ibt-search-type-label {
    padding: var(--wp--preset--spacing--xs) !important;
  }
  .ibt-search-result-column {
    row-gap: var(--wp--preset--spacing--xs); /* overrides big default blockGap */
  }
  .ibt-search-columns {
    row-gap: 0;
  }
}


/* ---------------------------------------------------------------------
   4A - WooCommerce (Temporary numbering until full refactor.)
   WooCommerce section for all store-related styling.
   --------------------------------------------------------------------- */

/* ----- 4A.1 - Global resets, helpers & styling -----------------------
   General resets and styling that applies across Woo store */

/* Woo buttons are styled with general buttons */ 

/* Price – heading font for all Woo contexts */
.woocommerce-Price-amount {
  font-family: var(--wp--preset--font-family--heading);
}

/* Universal spacing & font size for WooCommerce breadcrumbs */
.wp-block-breadcrumbs,
.wc-block-breadcrumbs {
  padding-block-start: var(--wp--preset--spacing--s);
  font-size:  var(--wp--preset--font-size--s) !important;
}

/* ----- WooCommerce links -----
   Product titles use underline on hover only.
   Beats base styling by specificity (and later)
   DEV – extend selector list as new Woo templates are styled. */

/* Base state */
.wc-block-product .wp-block-post-title a {
  text-decoration: none ; 
  transition:
    text-underline-offset var(--transition-base),
    text-decoration-thickness var(--transition-base);
}

/* Hover */
.wc-block-product .wp-block-post-title a:hover {
  text-decoration: underline !important;
  text-underline-offset: 0.2em;
  transition:
    text-underline-offset var(--transition-base),
    text-decoration-thickness var(--transition-base);
}



/* ----- 4A.2 - Shop archive / product grid ----------------------------
   Styling that applies to all archive/grid views */

/* Compact heading/paragraph rhythm for product grids */
:is(
  .wp-block-post-template,
  .wp-block-woocommerce-product-template,
  .wp-block-query-loop
) :where(h1, h2, h3, h4, h5, h6, p) {
  margin-block: 0;
  padding-block: 0.1em;
}

/* Reduce font size for title */
 .wc-block-product .wp-block-post-title {
  font-size: var(--wp--preset--font-size--m) !important;
 }

/* Author line – smaller, centred in product grids */
.wc-block-product .ibt-author-parastyle {
  font-size: var(--wp--preset--font-size--s);
  font-weight: 400;
  text-align: center;
}

/* Use heading font for product prices in grid */
.wc-block-components-product-price {
  font-family: var(--wp--preset--font-family--heading);
}

/* Adjust 'in basket' button text size inside to match geeneral button */
.wc-block-components-product-button__button.has-small-font-size span[data-wp-text="state.addToCartText"] {
  font-size: var(--wp--preset--font-size--m);
  line-height: 1.2;
}

/* Add space below 'Add to basket' button for visual balance */
.wc-block-components-product-button {
  margin-bottom: var(--wp--preset--spacing--s);
}

/* ----- 4A.3 - Single product -------------------------------------------
   Styling that applies to just the single product template */

/* Remove padding and margin from Woo gallery wrappers and centre image */
.single-product .wp-block-woocommerce-product-image-gallery,
.single-product div.product div.images,
.single-product .woocommerce-product-gallery,
.single-product .woocommerce-product-gallery__wrapper,
.single-product .woocommerce-product-gallery__image {
  padding: 0 !important;
  margin: 0 !important;
  float: none !important;
  display: block;
  text-align: center;
}

/* Desktop & tablet only – scale product image to suit medium size screen. */
@media (min-width: 783px) {

  /* Fluid column width ONLY inside Woo product gallery wrapper */
  .single-product .product .wp-block-columns > .wp-block-column:first-child {
      flex: 0 0 clamp(240px, 40vw, 512px) !important;
      min-width: 0 !important;
  }

  /* Image fills its (now fluid) column */
  .single-product .woocommerce-product-gallery__image img {
    width: 100%;
    height: auto;
    display: block;
  }
}

/* Mobile – reduce image size and add vertical separation */
@media (max-width: 782px) {

  /* Scale down the image to a reasonable size */
.single-product .woocommerce-product-gallery__image img {
    width: clamp(200px, 70vw, 450px) !important;
    height: auto;
    display: block;
}

  /* We tried to centre the image but gave up... */

  /* Vertically separate image from summary */
  .single-product .product .wp-block-columns.alignwide {
      row-gap: var(--wp--preset--spacing--l);
  }
}

/* Balanced gutter between image and text columns */
.single-product .wp-block-columns.alignwide {
  column-gap: var(--wp--preset--spacing--l) !important;
}

/* Add top margin to image column */
.single-product .wp-block-columns.alignwide > .wp-block-column:first-child {
  margin-block-start: var(--wp--preset--spacing--s) !important;
}

/* Compact text rhythm for single product layout
   Note – reduces vertical gaps from Woo defaults; may relax later via json. */
.single-product :where(h1, h2, h3, h4, h5, h6, p) {
  padding-block: 0.3rem !important;
  margin: 0 ;
}

/* Adjust single product title size */
.single-product .wc-block-product-title,
.single-product .wp-block-post-title {
  font-size: var(--wp--preset--font-size--xl);
  line-height: 1.1;
  padding-bottom: 0 !important;
}

/* Set font size for author */
.single-product .ibt-author-parastyle {
  font-size: var(--wp--preset--font-size--l);
}

/* Adjust spacing for Publisher (product_brand) line under Author */
.single-product .taxonomy-product_brand.wp-block-post-terms {
  margin-block-start: 0.25rem;
  margin-block-end: 0.25rem;
}

/* Typography and spacing for product price */
.single-product .woocommerce-Price-amount {
  font-size: var(--wp--preset--font-size--l);
}
.single-product .wp-block-woocommerce-product-price,
.single-product .wp-block-woocommerce-product-price > .wc-block-components-product-price {
  margin-block: 0;
  padding-block: 0 0.3rem;
  line-height: 1;
}

/* Add space above Add-to-Cart area to separate it from short description */
.single-product .wp-block-add-to-cart-form,
.single-product .wc-block-add-to-cart-form {
  margin-block-start: var(--wp--preset--spacing--s);
}

/* Use heading font and medium size for classic Woo quantity input */
.single-product input.input-text.qty {
  font-family: var(--wp--preset--font-family--heading);
  font-size: var(--wp--preset--font-size--m);
}

/* Hide category line in single-product.
Note - may want to turn it back on so left in template. */
.single-product .taxonomy-product_cat.wp-block-post-terms {
  display: none !important;
}

/* Floating frame + centered label for express checkout on SINGLE PRODUCT only */
.single-product .wcpay-express-checkout-wrapper {
    position: relative;
    border: 1px solid var(--wp--preset--color--border-dark, #999);
    border-radius: 0.5rem;
    background: var(--color-background, #FAF9F7);
    padding: 1.25rem 0.75rem 0.75rem;
    margin-bottom: 1.5rem;
}
.single-product .wcpay-express-checkout-wrapper::before {
    content: "Buy Now";
    position: absolute;
    top: -0.65rem;
    left: 50%;
    transform: translateX(-50%);
    background: var(--color-background, #FAF9F7);
    padding: 0 0.5rem;
    font-size: 0.875rem;
    font-weight: 600;
}


/* Improve readability of classic WooCommerce tab headers */
.single-product ul.wc-tabs li a {
  font-size: var(--wp--preset--font-size--l);
  font-family: var(--wp--preset--font-family--heading);
  font-weight: 600;
  line-height: 1.3;
}

/* Hide repeated H2 headings inside Woo product tabs */
.single-product .woocommerce-Tabs-panel > h2:first-child {
  display: none !important;
}

/* Add gentle vertical rhythm to paragraphs in the main Description tab */
.single-product .woocommerce-Tabs-panel--description p {
  margin-block: 0.5em;
}

/* Adjust font size of the reviews title for consistency with theme typography */
.single-product .woocommerce-Reviews-title {
  font-size: var(--wp--preset--font-size--xl);
  font-weight: 600;
  line-height: 1.2;
  margin-block: var(--wp--preset--spacing--m);
}

/* ----- 4A.4 - Cart, checkout & notices ---------------------------------
   Styling that applies to cart and checkout */

/* Supress excerpts in mini cart */
.wc-block-mini-cart__drawer .wc-block-components-product-metadata__description > p { 
  display: none !important; 
}

/* Suppress product excerpts in full cart view */
.wc-block-cart .wc-block-components-product-metadata__description > p {
  display: none !important;
}


/* ======================================================================
   5. UTILITIES
   SR-only, status colours, notices, dev/test helpers
   ====================================================================== */

/* Prevent media (img/video/iframe/etc) overflowing */
img, video, iframe, embed, object { max-width: 100%; height: auto; display: block;}

/* Anchor scroll offset to prevent in-page targets hiding behind sticky header */
h1[id], h2[id], h3[id], h4[id], h5[id], h6[id] {scroll-margin-top: 102px;}

/* Screen-reader only text */
.screen-reader-text {
  position: absolute !important;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip-path: inset(50%);
  white-space: nowrap;
  border: 0;
}

/* Editor-only: force both nav variants visible in Site Editor
   (keeps blocks selectable while editing) - Now in ibt-editor.css */


/* ======================================================================
   6. STATES & MEDIA
   Breakpoints, reduced motion, print
   ====================================================================== */

/* Responsive code moved to sections to keep it in more human logical flow */



/* ---------------------- 6.4 Print Safeguards ------------------ */

/* --- Prevent print layout issues (sticky header, double nav) --- */
@media print {
  /* Show desktop navigation and hide mobile navigation */
  .ibt-header-nav-desktop { display: block !important; }
  .ibt-header-nav-mobile  { display: none !important; }

  /* Disable sticky positioning for header and its template wrapper */
  .ibt-header-sticky,
  .wp-block-template-part:has(> .ibt-header-sticky) {
    position: static !important;
    top: auto !important;
  }
}

/* ---------------------- 6.5 Reduced Motion ------------------ */

/* --- Implement user reduced-motion preference (WCAG compliance) --- */
@media (prefers-reduced-motion: reduce) {
  /* Disable smooth scrolling if set anywhere */
  :root, html:focus-within { scroll-behavior: auto !important; }
  /* Disable animations/transitions across the UI */
  *, *::before, *::after {
      animation: none !important;
      transition: none !important;
  }
}


/* ======================================================================
   7. DEV – WIP CODE
   ====================================================================== */
/* !!!!!! THIS BLOCK SHOULD BE COMMENTED OUT IN PRODUCTION !!!!!!
   DEV ONLY - Make any use of default button styles extremely obvious in dev. 
   When this is 'turned off' reasonable defaults come from theme.json   */

.is-style-fill .wp-element-button,
.is-style-outline .wp-element-button {
  background-color: hotpink !important;
  color: magenta !important;
  border-color: yellow !important;
}
/* !!! END DEV ONLY BLOCK !!! */
/* ====================================================================== */

/* WORK IN PROGRESS CODE BELOW THIS LINE */


/* Taxonomy Topic Results */

/* Adds visual context to Topic archive titles without creating extra headings */
.ibt-topic-title::before {
	content: "Results for topic: ";
}

.ibt-topic-tags-group {
	border: 1px solid var(--wp--custom--color--ui-border-soft, rgba(92, 85, 78, 0.25));
	border-radius: 0.375rem; /* 6px */
	padding-inline: var(--wp--preset--spacing--xs);
	margin-bottom: var(--wp--preset--spacing--m);
}

/* Tighten spacing */
.ibt-topic-tags-title {
  padding-bottom: 0;
}

/* **********************************************************************
   END IBT THEME CSS
   ********************************************************************** */