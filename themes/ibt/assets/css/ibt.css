/* **********************************************************************************************************
                                         IBT – MINIMAL FRONT END STYLE SHEET
   Purpose: minimal structural helpers only. Keep colours, typography and hover effects in
   theme.json where ever possible. Temporary test rules allowed if clearly marked and cleaned up as you go.
  *********************************************************************************************************** */

/* ===========================================================================================================
     IBT – WordPress 6.8 helpers to prevent core "features" causing problems and do things json can't yet.     */

/* 1. Ensure images, videos, iframes, etc. never overflow their container.
Core handles most cases but some embeds still slip through. */
img, video, iframe, embed, object { max-width: 100%; height: auto; display: block;}

/* 2. Anchor scroll margin -  Prevent headings with IDs from hiding under the sticky header when used as anchor targets.
!!!!!!! ADJUST TO MATCH HEADER WHEN DESIGNED. !!!!!!!!!!*/
h1[id], h2[id], h3[id], h4[id], h5[id], h6[id] {scroll-margin-top: var(--wp--preset--spacing--l);}

/* 3. Set per-level heading styles that cannot yet be expressed in theme.json (WP 6.8 limitation). 
Migrate when core adds level-specific controls to json.                                                                                                 */
h1 {font-size: var(--wp--preset--font-size--xxxl); font-weight: 700 ; padding-top: var(--wp--preset--spacing--xxs) ;}
h2 {font-size: var(--wp--preset--font-size--xxl); font-weight: 600 ; padding-top: var(--wp--preset--spacing--s) ;}
h3 {font-size: var(--wp--preset--font-size--xl); font-weight: 600 ; padding-top: var(--wp--preset--spacing--xxs) ;}
h4 {font-size: var(--wp--preset--font-size--l); font-weight: 600 ; padding-top: var(--wp--preset--spacing--xxs) ;}
h5 {font-size: var(--wp--preset--font-size--m); font-weight: 600 ; padding-top: var(--wp--preset--spacing--xxs) ;}
h6 {font-size: var(--wp--preset--font-size--m); font-weight: 450 ; padding-top: var(--wp--preset--spacing--xxs) ;}

/* 4. Give visual clue of visited links for body text only. No json option to do this. */
:where(p, li, .rich-text) a:visited {color: var(--wp--custom--color--color-text-emphasis-primary-visited);}

/* 5. Style custom button variants in CSS as not supported in json for WP6.8 ref 
      https://developer.wordpress.org/block-editor/how-to-guides/themes/global-settings-and-styles/#block-style-variations  */
  
  .wp-block-button.is-style-buy-solid .wp-block-button__link {
  background-color: var(--wp--custom--color--color-secondary);
  color: #FFFFFF;
  border: 2px solid var(--wp--custom--color--color-secondary);
}

.wp-block-button.is-style-buy-outline .wp-block-button__link {
  background-color: transparent;
  color: var(--wp--custom--color--color-secondary);
  border: 2px solid var(--wp--custom--color--color-secondary);
}

/* 5a. Add hover/focus-visible  effects for all four IBT button types. */

/* Shared behaviour for all buttons */
.wp-block-button__link {transition: transform 0.15s ease, background-color 0.15s ease, border-color 0.15s ease;}
.wp-block-button__link:hover {transform: translateY(-1px);}  /* Adds a non-colour cue (slight scale) and token-based colour shifts */
.wp-block-button__link:focus-visible {outline: 2px solid var(--wp--custom--color--color-primary); outline-offset: 2px;}

/* Primary Solid (default core) */
.wp-block-button:not(.is-style-outline):not(.is-style-buy-solid):not(.is-style-buy-outline) .wp-block-button__link:hover {
  background-color: var(--wp--custom--color--color-primary-hover);
  border-color: var(--wp--custom--color--color-primary-hover);
}

/* Prinmary Outline */
.wp-block-button.is-style-outline .wp-block-button__link:hover {
  color: var(--wp--custom--color--color-primary-hover);
  border-color: var(--wp--custom--color--color-primary-hover);
}

/* Buy Solid (Commercial) */
.wp-block-button.is-style-buy-solid .wp-block-button__link:hover {
  background-color: var(--wp--custom--color--color-secondary-hover);
  border-color: var(--wp--custom--color--color-secondary-hover);
}

/* Buy Outline (Commercial) */
.wp-block-button.is-style-buy-outline .wp-block-button__link:hover {
  color: var(--wp--custom--color--color-secondary-hover);
  border-color: var(--wp--custom--color--color-secondary-hover);
}

/* 6. Style all link hover effects in css because WP6.8 doesn't support specific styling (e.g. Nav)
and it makes more  sense to have it all in one place. */

/* 6a. Global text link hover — body links and all nav links
   EXCEPT header page list (ibt-header-pages css tag on navigation container) */

/* On hover */
:where(a[href]):not(.wp-element-button):not(.wp-block-button__link):not(.ibt-header-nav a):hover,
.wp-block-navigation:not(.ibt-header-nav) a:hover {
  text-decoration: underline;
  color: var(--wp--custom--color--color-primary-hover);
  text-decoration-thickness: 2px;
  text-underline-offset: 0.25em;
}

/* On Focus-Visible */
:where(a[href]):not(.wp-element-button):not(.wp-block-button__link):not(.ibt-header-nav a):focus-visible,
.wp-block-navigation:not(.ibt-header-nav) a:focus-visible {
  outline: 2px solid var(--wp--custom--color--color-primary);
  outline-offset: 2px;
}

/* 6b. Give different styling treatement to navigations with css tag ibt-header-pages 
      for header links                                                                */

/* Add transparent box as default to avoid layout shift */      
.ibt-header-nav .wp-block-navigation-item__content {
  border: 1.5px solid transparent;
  border-radius: 6px;
  padding: 0.25rem 0.5rem;
  transition: border-color 0.2s ease, color 0.2s ease;
}

/* On hover OR focus-visible change box color to brand color */
.ibt-header-nav .wp-block-navigation-item__content:hover,
.ibt-header-nav .wp-block-navigation-item__content:focus-visible {
  color: var(--wp--custom--color--color-primary-hover);
  border-color: currentColor;
}



/* End IBT - Wordpress 6.8 helpers   
============================================================================================================== */


/* ===== DEV / TESTING =====
   Status & disabled colour utilities for quick visual checks.
   Safe to delete or comment out before production. */

/* Text colour only */
.ibt-status--success { color: var(--wp--custom--color--color-success); }
.ibt-status--warning { color: var(--wp--custom--color--color-warning); }
.ibt-status--error   { color: var(--wp--custom--color--color-error); }
.ibt-status--info    { color: var(--wp--custom--color--color-info); }

/* Background (tint) only */
.ibt-status-bg--success { background-color: var(--wp--custom--color--color-success-tint); }
.ibt-status-bg--warning { background-color: var(--wp--custom--color--color-warning-tint); }
.ibt-status-bg--error   { background-color: var(--wp--custom--color--color-error-tint); }
.ibt-status-bg--info    { background-color: var(--wp--custom--color--color-info-tint); }

/* Border colour only */
.ibt-status-border--success { border-color: var(--wp--custom--color--color-success); }
.ibt-status-border--warning { border-color: var(--wp--custom--color--color-warning); }
.ibt-status-border--error   { border-color: var(--wp--custom--color--color-error); }
.ibt-status-border--info    { border-color: var(--wp--custom--color--color-info); }

/* Simple notice pattern (padding + radius + border) */
.ibt-notice { padding: 0.75rem 1rem; border-radius: 8px; border: 1px solid transparent; }
.ibt-notice--success { background-color: var(--wp--custom--color--color-success-tint); border-color: var(--wp--custom--color--color-success); color: var(--wp--custom--color--color-success); }
.ibt-notice--warning { background-color: var(--wp--custom--color--color-warning-tint); border-color: var(--wp--custom--color--color-warning); color: var(--wp--custom--color--color-warning); }
.ibt-notice--error   { background-color: var(--wp--custom--color--color-error-tint);   border-color: var(--wp--custom--color--color-error);   color: var(--wp--custom--color--color-error); }
.ibt-notice--info    { background-color: var(--wp--custom--color--color-info-tint);    border-color: var(--wp--custom--color--color-info);    color: var(--wp--custom--color--color-info); }

/* ===== IBT Disabled Utilities =====
   Use these on any block to simulate a disabled/greyed state. */

.ibt-status--disabled        { color: var(--wp--custom--color--color-disabled); }
.ibt-status-bg--disabled     { background-color: var(--wp--custom--color--color-disabled-tint); }
.ibt-status-border--disabled { border-color: var(--wp--custom--color--color-disabled); }

/* Quick demo: greyed-out notice style */
.ibt-notice--disabled {
  background-color: var(--wp--custom--color--color-disabled-tint);
  border: 1px solid var(--wp--custom--color--color-disabled);
  color: var(--wp--custom--color--color-disabled);
}

/* *************************************************************************************************************
                                       END OF MINIMAL FRONT END STYLE SHEET
   ************************************************************************************************************* */
 

/* === Global group side-padding reset ======================================
   Zero side padding on all groups EXCEPT:
   1) WordPress root padding (.has-global-padding)
   2) Custom outer wrappers we mark (.ibt-outer-wrap)
   This keeps clamp padding where we explicitly allow it. */
:root :where(.wp-block-group):not(.has-global-padding):not(.ibt-outer-wrap) {
  padding-left: 0;
  padding-right: 0;
}

/* === Outer wrapper clamp ===================================================
   Apply root-style clamp padding only to wrappers we tag as ibt-outer-wrap.
   Example: the full-width header band. */
.ibt-outer-wrap {
  padding-left: clamp(1rem, 4vw, 3rem);
  padding-right: clamp(1rem, 4vw, 3rem);
}

/* === Sticky header band ====================================================
   Full-width colour band inside the template part. */
.ibt-sticky {
  position: sticky;
  top: 0;
  z-index: 50;               /* sits above content */
  background: inherit;       /* use block background */
}

/* WP admin bar offsets */
.admin-bar .ibt-sticky { top: 32px; }
@media (max-width: 782px) {
  .admin-bar .ibt-sticky { top: 46px; }
}

/* === Robust wrapper fix using :has() ======================================
   If the template-part wrapper contains a sticky group (our header),
   make the wrapper itself sticky. This works around the Site Editor
   container issue while remaining future-proof. */
.wp-block-template-part:has(> .is-position-sticky),
.wp-block-template-part:has(> .ibt-sticky) {
  position: sticky;
  top: 0;
  z-index: 49; /* just under the header itself */
}
.admin-bar .wp-block-template-part:has(> .is-position-sticky),
.admin-bar .wp-block-template-part:has(> .ibt-sticky) {
  top: 32px;
}
@media (max-width: 782px) {
  .admin-bar .wp-block-template-part:has(> .is-position-sticky),
  .admin-bar .wp-block-template-part:has(> .ibt-sticky) {
    top: 46px;
  }
}

/* === Inner header wrapper ==================================================
   Width-only container inside the full-bleed band.
   Constrains content to theme wide size while leaving side padding
   to the outer wrapper. */
.ibt-header-inner {
  box-sizing: border-box;
  width: 100%;
  max-width: 80rem;          
  margin-left: auto;
  margin-right: auto;

}
  /*
  display: grid;
  grid-template-columns: 1fr auto;  
  grid-template-rows: auto auto;    
  align-items: center;
  gap: var(--wp--preset--spacing--s);
}

/* === Grid children =========================================================
   Ensure Row 1 and the primary navigation both span the full inner width. */
/*.ibt-header-row1 { grid-column: 1 / -1; } 
.ibt-header-nav { grid-column: 1 / -1; }

/* === Print safeguard ======================================================= */
@media print {
  .ibt-sticky { position: static !important; }
}
